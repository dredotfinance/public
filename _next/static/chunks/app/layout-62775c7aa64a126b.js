(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{12864:(e,t,a)=>{"use strict";a.d(t,{Header:()=>N});var r=a(95155),s=a(6874),n=a.n(s),o=a(35695),l=a(63439),i=a(12115),d=a(74783),c=a(97168),u=a(15452),m=a(74466),g=a(54416),b=a(53999);let f=u.bL,h=u.l9;u.bm;let p=u.ZL,x=i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(u.hJ,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});x.displayName=u.hJ.displayName;let v=(0,m.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),y=i.forwardRef((e,t)=>{let{side:a="right",className:s,children:n,...o}=e;return(0,r.jsxs)(p,{children:[(0,r.jsx)(x,{}),(0,r.jsxs)(u.UC,{ref:t,className:(0,b.cn)(v({side:a}),s),...o,children:[n,(0,r.jsxs)(u.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});function k(e){let{links:t}=e,[a,s]=(0,i.useState)(!1),l=(0,o.usePathname)();return(0,r.jsxs)(f,{open:a,onOpenChange:s,children:[(0,r.jsx)(h,{asChild:!0,children:(0,r.jsxs)(c.$,{variant:"ghost",size:"icon",onClick:()=>s(!0),className:"md:hidden text-gray-300",children:[(0,r.jsx)(d.A,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,r.jsx)(y,{side:"right",className:"bg-gray-900 border-gray-800 pt-10",children:(0,r.jsx)("div",{className:"flex flex-col space-y-6",children:(0,r.jsx)("nav",{className:"flex flex-col space-y-4",children:t.map(e=>(0,r.jsx)(n(),{href:e.href,className:"text-lg font-medium px-2 py-1 rounded-md transition-colors ".concat(l===e.href?"text-gold-400 bg-gold-500/10":"text-white/80 hover:text-gold-400 hover:bg-gray-800/50"),onClick:()=>s(!1),children:e.label},e.href))})})})]})}function N(){let e=(0,o.usePathname)(),t=[{href:"/stake",label:"Stake"},{href:"/buy-stakes",label:"Buy Stakes"},{href:"/mint",label:"Mint"},{href:"/leaderboard",label:"Leaderboard"}];return(0,r.jsx)("header",{className:"border-b border-gray-800/50 bg-gray-900/30 backdrop-blur-sm sticky top-0 z-40",children:(0,r.jsxs)("div",{className:"container mx-auto flex items-center justify-between py-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-4 md:gap-6",children:(0,r.jsx)(n(),{href:"/",children:(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)("h1",{className:"text-xl md:text-2xl font-bold gradient-text",children:"DRE Finance"})})})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("nav",{className:"hidden md:flex items-center gap-6 lg:gap-8",children:t.map(t=>(0,r.jsx)(n(),{href:t.href,className:e===t.href?"text-sm font-medium text-gold-400":"text-sm font-medium text-white/80 hover:text-gold-400 transition-colors",children:t.label},t.href))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.pK,{accountStatus:"address",chainStatus:"icon"}),(0,r.jsx)(k,{links:t})]})]})]})})}y.displayName=u.UC.displayName,i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(u.hE,{ref:t,className:(0,b.cn)("text-lg font-semibold text-foreground",a),...s})}).displayName=u.hE.displayName,i.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(u.VY,{ref:t,className:(0,b.cn)("text-sm text-muted-foreground",a),...s})}).displayName=u.VY.displayName},19324:()=>{},30943:(e,t,a)=>{"use strict";a.d(t,{r:()=>i});var r=a(38227),s=a(36241),n=a(81100),o=a(34289),l=a(76736);async function i(e){let t=(0,r.l)({chain:n.T,transport:(0,s.L)()});console.log("userAddress",e);let a=await t.readContract({address:l.A.coreAddresses.uiHelper,abi:o,functionName:"getProtocolInfo",args:[e,Object.values(l.A.tokens).map(e=>e.address)]});console.log("result",a);let[i,d,c,u,m,g,b,f]=a;return{tvl:i,totalSupply:d,totalStaked:c,totalRewards:u,currentAPR:m,tokenInfos:g,stakingPositions:b,bondPositions:f}}},39919:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,Q:()=>s});let r=(0,a(51990).Z0)({name:"bonding",initialState:{offerings:[]},reducers:{setOfferings:(e,t)=>{e.offerings=t.payload}}}),{setOfferings:s}=r.actions,n=r.reducer},71382:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,19324,23)),Promise.resolve().then(a.bind(a,82201)),Promise.resolve().then(a.bind(a,91784)),Promise.resolve().then(a.bind(a,99199)),Promise.resolve().then(a.bind(a,99304)),Promise.resolve().then(a.bind(a,12864)),Promise.resolve().then(a.bind(a,26259)),Promise.resolve().then(a.bind(a,96063)),Promise.resolve().then(a.bind(a,58930)),Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.t.bind(a,69243,23)),Promise.resolve().then(a.t.bind(a,65299,23)),Promise.resolve().then(a.t.bind(a,34563,23))},82201:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var r=a(95155),s=a(92138),n=a(6874),o=a.n(n),l=a(49026),i=a(97168),d=a(35695),c=a(58281);function u(){let e="/"===(0,d.usePathname)(),{currentAPR:t}=(0,c.B)();return(0,r.jsx)("div",{children:e&&(0,r.jsx)("div",{className:"w-full bg-gradient-to-r from-gold-500/20 via-gold-600/20 to-gold-500/20 border-b border-gold-500/30",children:(0,r.jsx)("div",{className:"container mx-auto px-4 md:px-6 py-3",children:(0,r.jsx)(l.Fc,{className:"bg-transparent border-0 p-0",children:(0,r.jsxs)(l.TN,{className:"text-gold-100 flex items-center justify-between w-full",children:[(0,r.jsxs)("span",{className:"font-medium",children:[(0,r.jsx)("strong",{children:"Genesis Staking is now LIVE!"})," Convert scUSD to DRE and farm upto ",t,"% APR. Only 100k scUSD allocation available."]}),(0,r.jsx)(i.$,{asChild:!0,size:"sm",className:"bg-gold-500 hover:bg-gold-600 text-black font-semibold ml-4 shrink-0",children:(0,r.jsxs)(o(),{href:"/mint",className:"flex items-center gap-1",children:["Mint Now",(0,r.jsx)(s.A,{className:"h-3 w-3"})]})})]})})})})})}},91784:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>C});var r=a(95155),s=a(34540),n=a(51990),o=a(52939);let l=(0,n.Z0)({name:"protocol",initialState:{metrics:null,loading:!1,error:null},reducers:{setProtocolMetrics:(e,t)=>{e.metrics=t.payload,e.loading=!1,e.error=null},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload,e.loading=!1}}}),{setProtocolMetrics:i,setLoading:d,setError:c}=l.actions,u=l.reducer;var m=a(8345),g=a(39919),b=a(30943),f=a(1405);let h=(e,t)=>{switch(e.toLowerCase()){case"0x18b6963ebe82b87c338032649aaad4eec43d3ecb":return"DRE/USDC LP";case"0x88640d840614bb63cfb1545897d6d228b381c659":return"DRE/scUSD LP";default:return t}},p=(e,t)=>{switch(e.toLowerCase()){case"0x18b6963ebe82b87c338032649aaad4eec43d3ecb":return"DRE-USDC-LP";case"0x88640d840614bb63cfb1545897d6d228b381c659":return"DRE-scUSD-LP";default:return t}},x=(0,n.zD)("balances/fetchProtocolInfo",async e=>{console.log("fetchProtocolInfoThunk",e);let t=await (0,b.r)(e);return{...t,tvl:t.tvl.toString(),totalSupply:t.totalSupply.toString(),totalStaked:t.totalStaked.toString(),totalRewards:t.totalRewards.toString(),currentAPR:Number((0,f.J)(BigInt(t.currentAPR),16)).toFixed(2),tokenInfos:t.tokenInfos.map(e=>({...e,symbol:p(e.token,e.symbol),token:h(e.token,e.token),decimals:Number(e.decimals),treasuryValueDre:e.treasuryValueDre.toString(),treasuryBalance:e.treasuryBalance.toString(),balance:e.balance.toString(),allowance:e.allowance.toString()})),stakingPositions:t.stakingPositions.map(e=>({...e,id:e.id.toString(),amount:e.amount.toString(),rewards:e.rewards.toString(),cooldownEnd:e.cooldownEnd.toString(),declaredValue:e.declaredValue.toString(),rewardsUnlockAt:e.rewardsUnlockAt.toString()})),bondPositions:t.bondPositions.map(e=>({id:e.id.toString(),bondId:e.bondId.toString(),amount:e.amount.toString(),quoteAmount:e.quoteAmount.toString(),startTime:e.startTime.toString(),lastClaimTime:e.lastClaimTime.toString(),claimedAmount:e.claimedAmount.toString(),claimableAmount:e.claimableAmount.toString(),isStaked:e.isStaked}))}}),v=(0,n.Z0)({name:"balances",initialState:{tvl:"0",totalSupply:"0",totalStaked:"0",totalRewards:"0",currentAPR:"0",bondTokens:[],tokenInfos:[],stakingPositions:[],bondPositions:[],loading:!1,error:null,lastUpdated:null},reducers:{},extraReducers:e=>{e.addCase(x.pending,e=>{e.loading=!0,e.error=null}).addCase(x.fulfilled,(e,t)=>{e.loading=!1,e.error=null,e.lastUpdated=Date.now(),e.tvl=t.payload.tvl,e.totalSupply=t.payload.totalSupply,e.totalStaked=t.payload.totalStaked,e.totalRewards=t.payload.totalRewards,e.currentAPR=t.payload.currentAPR,e.tokenInfos=t.payload.tokenInfos,e.stakingPositions=t.payload.stakingPositions,e.bondPositions=t.payload.bondPositions}).addCase(x.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch protocol info"})}}).reducer,y=(0,n.U1)({reducer:{user:o.Ay,protocol:u,staking:m.A,bonding:g.A,balances:v}});var k=a(12115),N=a(76736);let j=e=>{let{children:t}=e,a=(0,s.wA)(),{lastUpdated:n}=(0,s.d4)(e=>e.balances),{fetchProtocolData:o}=function(){let{tvl:e,totalSupply:t,totalStaked:a,totalRewards:r,currentAPR:n,bondTokens:o,tokenInfos:l,stakingPositions:i,bondPositions:d,loading:c,error:u,lastUpdated:m}=(0,s.d4)(e=>e.balances),g=(0,k.useCallback)(()=>{let r=Object.entries(N.A.tokens).map(t=>{let[a,r]=t,s=l.find(e=>e.token===r.address),n=(null==s?void 0:s.balance)||0n,o=Number((0,f.J)(BigInt(n),r.decimals));return{symbol:a,amount:o.toString(),value:o.toString(),percentage:o/Number((0,f.J)(BigInt(e),18))*100}}).filter(e=>Number(e.value)>0).sort((e,t)=>Number(t.value)-Number(e.value)),s=Number((0,f.J)(BigInt(t),18)),o=Number((0,f.J)(BigInt(e),18));return{tokenPrice:1,marketCap:s,treasuryValue:o,lastUpdate:m||Date.now(),totalValueLocked:o,totalStaked:Number((0,f.J)(BigInt(a),18)),circulatingSupply:s,fullyDilutedMarketCap:s,currentAPY:Number(n),dailyROI:0,riskFreeValue:0,backingPrice:o/s,treasuryAssets:r,marketCapChange:0,apyChange:0,priceChange:0,treasuryChange:0}},[l,e,t,a,n,m]);return{tvl:e,totalSupply:t,totalStaked:a,totalRewards:r,currentAPR:n,bondTokens:o,tokenInfos:l,stakingPositions:i,bondPositions:d,loading:c,error:u,lastUpdated:m,fetchProtocolData:g}}();return(0,k.useEffect)(()=>{let e=async()=>{try{let e=await o();console.log("data",e),a(i(e))}catch(e){console.error("Error fetching protocol data:",e)}};n&&e()},[a,o,n]),(0,r.jsx)(r.Fragment,{children:t})};var S=a(2145);let w=()=>{let e=(0,s.wA)(),{address:t,isConnected:a}=(0,S.F)(),r=(0,k.useRef)(void 0),n=(0,k.useCallback)(()=>{console.log("refreshProtocolData",t),t?e(x(t)):e(x("0x0000000000000000000000000000000000000001"))},[t,e]);return(0,k.useEffect)(()=>(n(),r.current=setInterval(n,5e3),()=>{r.current&&clearInterval(r.current)}),[]),(0,k.useEffect)(()=>{a&&t?(r.current&&clearInterval(r.current),n(),r.current=setInterval(n,5e3)):r.current&&clearInterval(r.current)},[a,t,n]),{refreshProtocolData:n}};function P(e){let{children:t}=e;return w(),(0,r.jsx)(r.Fragment,{children:t})}function C(e){let{children:t}=e;return(0,r.jsx)(s.Kq,{store:y,children:(0,r.jsx)(j,{children:(0,r.jsx)(P,{children:t})})})}},99199:(e,t,a)=>{"use strict";a.d(t,{Web3Provider:()=>v});var r=a(95155);a(85035);var s=a(83415),n=a(87017),o=a(26715),l=a(63439),i=a(56774),d=a(85658),c=a(36241),u=a(81100),m=a(74113),g=a(29385),b=a(34324),f=a(51424);let h=(0,l.Qq)([{groupName:"Recommended",wallets:[m.G,g.Z,b.d,f.O]}],{appName:"Dre Finance",projectId:"c385954abce0db2b929248968af25c16"}),p=(0,d.Z)({chains:[u.T],connectors:h,transports:{[u.T.id]:(0,c.L)("https://rpc.soniclabs.com")}}),x=new n.E;function v(e){let{children:t}=e;return(0,r.jsx)(s.x,{config:p,children:(0,r.jsx)(o.Ht,{client:x,children:(0,r.jsx)(l.qL,{theme:(0,i.a)({accentColor:"rgb(150, 90, 8)",accentColorForeground:"white"}),children:t})})})}},99304:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>n});var r=a(95155);a(12115);var s=a(51362);function n(e){let{children:t,...a}=e;return(0,r.jsx)(s.N,{...a,children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2533,3012,8451,271,4772,6874,8550,4422,5067,8441,1684,7358],()=>t(71382)),_N_E=e.O()}]);