(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{12864:(e,t,a)=>{"use strict";a.d(t,{Header:()=>w});var r=a(95155),n=a(6874),o=a.n(n),s=a(35695),l=a(63439),i=a(12115),d=a(74783),c=a(97168),u=a(15452),g=a(74466),f=a(54416),m=a(53999);let p=u.bL,h=u.l9;u.bm;let b=u.ZL,y=i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(u.hJ,{className:(0,m.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n,ref:t})});y.displayName=u.hJ.displayName;let x=(0,g.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),v=i.forwardRef((e,t)=>{let{side:a="right",className:n,children:o,...s}=e;return(0,r.jsxs)(b,{children:[(0,r.jsx)(y,{}),(0,r.jsxs)(u.UC,{ref:t,className:(0,m.cn)(x({side:a}),n),...s,children:[o,(0,r.jsxs)(u.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});function N(e){let{links:t}=e,[a,n]=(0,i.useState)(!1),l=(0,s.usePathname)();return(0,r.jsxs)(p,{open:a,onOpenChange:n,children:[(0,r.jsx)(h,{asChild:!0,children:(0,r.jsxs)(c.$,{variant:"ghost",size:"icon",onClick:()=>n(!0),className:"md:hidden text-gray-300",children:[(0,r.jsx)(d.A,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,r.jsx)(v,{side:"right",className:"bg-gray-900 border-gray-800 pt-10",children:(0,r.jsx)("div",{className:"flex flex-col space-y-6",children:(0,r.jsx)("nav",{className:"flex flex-col space-y-4",children:t.map(e=>(0,r.jsx)(o(),{href:e.href,className:"text-lg font-medium px-2 py-1 rounded-md transition-colors ".concat(l===e.href?"text-gold-400 bg-gold-500/10":"text-white/80 hover:text-gold-400 hover:bg-gray-800/50"),onClick:()=>n(!1),children:e.label},e.href))})})})]})}function w(){let e=(0,s.usePathname)(),t=[{href:"/stake",label:"Stake"},{href:"/buy-stakes",label:"Buy Stakes"},{href:"/bond",label:"Bond"},{href:"/leaderboard",label:"Leaderboard"}];return(0,r.jsx)("header",{className:"border-b border-gray-800/50 bg-gray-900/30 backdrop-blur-sm sticky top-0 z-40",children:(0,r.jsxs)("div",{className:"container mx-auto flex items-center justify-between py-4",children:[(0,r.jsx)("div",{className:"flex items-center gap-4 md:gap-6",children:(0,r.jsx)(o(),{href:"/",children:(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)("h1",{className:"text-xl md:text-2xl font-bold gradient-text",children:"DRE Finance"})})})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("nav",{className:"hidden md:flex items-center gap-6 lg:gap-8",children:t.map(t=>(0,r.jsx)(o(),{href:t.href,className:e===t.href?"text-sm font-medium text-gold-400":"text-sm font-medium text-white/80 hover:text-gold-400 transition-colors",children:t.label},t.href))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.pK,{accountStatus:"address",chainStatus:"icon"}),(0,r.jsx)(N,{links:t})]})]})]})})}v.displayName=u.UC.displayName,i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(u.hE,{ref:t,className:(0,m.cn)("text-lg font-semibold text-foreground",a),...n})}).displayName=u.hE.displayName,i.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(u.VY,{ref:t,className:(0,m.cn)("text-sm text-muted-foreground",a),...n})}).displayName=u.VY.displayName},19104:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>P});var r=a(95155),n=a(34540),o=a(51990),s=a(52939),l=a(38326),i=a(8345),d=a(39919),c=a(38227),u=a(36241),g=a(81100),f=a(34289),m=a(76736);async function p(e){let t=(0,c.l)({chain:g.T,transport:(0,u.L)()}),[a,r,n,o,s,l,i,d,p]=await t.readContract({address:m.A.coreAddresses.uiHelper,abi:f,functionName:"getProtocolInfo",args:[e]});return{tvl:a,totalSupply:r,totalStaked:n,totalRewards:o,bondTokens:l,currentAPR:s,tokenInfos:i,stakingPositions:d,bondPositions:p}}let h=(0,o.zD)("balances/fetchProtocolInfo",async e=>{let t=await p(e);return{...t,tvl:t.tvl.toString(),totalSupply:t.totalSupply.toString(),totalStaked:t.totalStaked.toString(),totalRewards:t.totalRewards.toString(),currentAPR:t.currentAPR.toString(),tokenInfos:t.tokenInfos.map(e=>({...e,balance:e.balance.toString(),allowance:e.allowance.toString()})),stakingPositions:t.stakingPositions.map(e=>({...e,id:e.id.toString(),amount:e.amount.toString(),rewards:e.rewards.toString(),cooldownEnd:e.cooldownEnd.toString(),declaredValue:e.declaredValue.toString(),rewardsUnlockAt:e.rewardsUnlockAt.toString()})),bondPositions:t.bondPositions.map(e=>({...e,amount:e.amount.toString(),payout:e.payout.toString(),vestingPeriod:e.vestingPeriod.toString(),vestingStart:e.vestingStart.toString(),claimed:e.claimed.toString()}))}}),b=(0,o.Z0)({name:"balances",initialState:{tvl:"0",totalSupply:"0",totalStaked:"0",totalRewards:"0",currentAPR:"0",bondTokens:[],tokenInfos:[],stakingPositions:[],bondPositions:[],loading:!1,error:null,lastUpdated:null},reducers:{},extraReducers:e=>{e.addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,(e,t)=>{e.loading=!1,e.error=null,e.lastUpdated=Date.now(),e.tvl=t.payload.tvl,e.totalSupply=t.payload.totalSupply,e.totalStaked=t.payload.totalStaked,e.totalRewards=t.payload.totalRewards,e.currentAPR=t.payload.currentAPR,e.bondTokens=t.payload.bondTokens,e.tokenInfos=t.payload.tokenInfos,e.stakingPositions=t.payload.stakingPositions,e.bondPositions=t.payload.bondPositions}).addCase(h.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch protocol info"})}}).reducer,y=e=>t=>a=>{console.group("%c Action: ".concat(a.type),"color: #00A8E8; font-weight: bold"),console.log("%c Previous State:","color: #9E9E9E; font-weight: bold",e.getState()),console.log("%c Action:","color: #00A8E8; font-weight: bold",a);let r=t(a);return console.log("%c Next State:","color: #47B04B; font-weight: bold",e.getState()),console.groupEnd(),r},x=(0,o.U1)({reducer:{user:s.Ay,protocol:l.Ay,staking:i.A,bonding:d.Ay,balances:b},middleware:e=>e().concat(y)});var v=a(12115),N=a(1405);let w=e=>{let{children:t}=e,a=(0,n.wA)(),{lastUpdated:o}=(0,n.d4)(e=>e.balances),{fetchProtocolData:s}=function(){let{tvl:e,totalSupply:t,totalStaked:a,totalRewards:r,currentAPR:o,bondTokens:s,tokenInfos:l,stakingPositions:i,bondPositions:d,loading:c,error:u,lastUpdated:g}=(0,n.d4)(e=>e.balances),f=(0,v.useCallback)(()=>{let r=Object.entries(m.A.tokens).map(t=>{let[a,r]=t,n=l.find(e=>e.token===r.address),o=(null==n?void 0:n.balance)||0n,s=Number((0,N.J)(BigInt(o),r.decimals));return{symbol:a,amount:s.toString(),value:s.toString(),percentage:s/Number((0,N.J)(BigInt(e),18))*100}}).filter(e=>Number(e.value)>0).sort((e,t)=>Number(t.value)-Number(e.value)),n=Number((0,N.J)(BigInt(t),18)),s=Number((0,N.J)(BigInt(e),18));return{tokenPrice:1,marketCap:n,treasuryValue:s,lastUpdate:g||Date.now(),totalValueLocked:s,totalStaked:Number((0,N.J)(BigInt(a),18)),circulatingSupply:n,fullyDilutedMarketCap:n,currentAPY:Number((0,N.J)(BigInt(o),2)),dailyROI:0,riskFreeValue:0,backingPrice:s/n,treasuryAssets:r,marketCapChange:0,apyChange:0,priceChange:0,treasuryChange:0}},[l,e,t,a,o,g]);return{tvl:e,totalSupply:t,totalStaked:a,totalRewards:r,currentAPR:o,bondTokens:s,tokenInfos:l,stakingPositions:i,bondPositions:d,loading:c,error:u,lastUpdated:g,fetchProtocolData:f}}();return(0,v.useEffect)(()=>{let e=async()=>{try{let e=await s();a((0,l.GS)(e))}catch(e){console.error("Error fetching protocol data:",e)}};o&&e()},[a,s,o]),(0,r.jsx)(r.Fragment,{children:t})};var k=a(2145);let S=()=>{let e=(0,n.wA)(),{address:t,isConnected:a}=(0,k.F)(),r=(0,v.useRef)(void 0),o=(0,v.useCallback)(()=>{t&&e(h(t))},[t,e]);return(0,v.useEffect)(()=>{if(a&&t)return o(),r.current=setInterval(o,5e3),()=>{r.current&&clearInterval(r.current)}},[a,t,o]),(0,v.useEffect)(()=>{a&&t?(r.current&&clearInterval(r.current),o(),r.current=setInterval(o,5e3)):r.current&&clearInterval(r.current)},[a,t,o]),{refreshProtocolData:o}};function j(e){let{children:t}=e;return S(),(0,r.jsx)(r.Fragment,{children:t})}function P(e){let{children:t}=e;return(0,r.jsx)(n.Kq,{store:x,children:(0,r.jsx)(w,{children:(0,r.jsx)(j,{children:t})})})}},19324:()=>{},27888:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,19324,23)),Promise.resolve().then(a.bind(a,83027)),Promise.resolve().then(a.bind(a,19104)),Promise.resolve().then(a.bind(a,99199)),Promise.resolve().then(a.bind(a,99304)),Promise.resolve().then(a.bind(a,12864)),Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.t.bind(a,65299,23)),Promise.resolve().then(a.t.bind(a,34563,23))},32267:(e,t,a)=>{"use strict";a.d(t,{f:()=>s});var r=a(34540),n=a(39919),o=a(73349);let s=()=>{let e=(0,r.wA)(),t=(0,r.d4)(e=>e.bonding),a=async()=>{try{e((0,n.r1)(!0));let t=o.D.bondOfferings();e((0,n.XN)(t))}catch(t){e((0,n.Nh)(t instanceof Error?t.message:"Failed to fetch bond offerings"))}finally{e((0,n.r1)(!1))}},s=async()=>{try{e((0,n.r1)(!0));let t=o.D.bondPositions();e((0,n.W3)(t))}catch(t){e((0,n.Nh)(t instanceof Error?t.message:"Failed to fetch bond positions"))}finally{e((0,n.r1)(!1))}},l=async(t,a)=>{try{e((0,n.r1)(!0));let r={id:Date.now().toString(),offeringId:t,amount:a,payout:"0",startTime:Date.now(),endTime:Date.now()+6048e5,claimed:"0",isVested:!1};e((0,n.Yg)(r))}catch(t){e((0,n.Nh)(t instanceof Error?t.message:"Failed to purchase bond"))}finally{e((0,n.r1)(!1))}},i=async t=>{try{e((0,n.r1)(!0)),e((0,n.co)({id:t,updates:{claimed:"100%",isVested:!0}}))}catch(t){e((0,n.Nh)(t instanceof Error?t.message:"Failed to claim bond"))}finally{e((0,n.r1)(!1))}};return{...t,fetchBondOfferings:a,fetchBondPositions:s,purchaseBond:l,claimBond:i}}},39919:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>u,Nh:()=>c,W3:()=>s,XN:()=>n,Yg:()=>l,co:()=>i,r1:()=>d});let r=(0,a(51990).Z0)({name:"bonding",initialState:{offerings:[],positions:[],isLoading:!1,error:null},reducers:{setBondOfferings:(e,t)=>{e.offerings=t.payload},updateBondOffering:(e,t)=>{let a=e.offerings.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.offerings[a]={...e.offerings[a],...t.payload.updates})},setBondPositions:(e,t)=>{e.positions=t.payload},addBondPosition:(e,t)=>{e.positions.push(t.payload)},updateBondPosition:(e,t)=>{let a=e.positions.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.positions[a]={...e.positions[a],...t.payload.updates})},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload}}}),{setBondOfferings:n,updateBondOffering:o,setBondPositions:s,addBondPosition:l,updateBondPosition:i,setLoading:d,setError:c}=r.actions,u=r.reducer},83027:(e,t,a)=>{"use strict";a.d(t,{DataInitializer:()=>c});var r=a(95155),n=a(12115),o=a(85711),s=a(40184),l=a(58281),i=a(32267);let d=()=>{let{fetchTokenBalances:e,fetchTokenApprovals:t}=(0,o.J)(),{fetchProtocolMetrics:a}=(0,s.m)(),{fetchStakingPositions:r}=(0,l.B)(),{fetchBondOfferings:d,fetchBondPositions:c}=(0,i.f)();(0,n.useEffect)(()=>{(async()=>{try{console.log("Initializing data...")}catch(e){console.error("Failed to initialize data:",e)}})()},[])};function c(e){let{children:t}=e;return d(),(0,r.jsx)(r.Fragment,{children:t})}},85711:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var r=a(34540),n=a(52939);let o=()=>{let e=(0,r.wA)(),t=(0,r.d4)(e=>e.user),a=async(t,a)=>{try{e((0,n.r1)(!0)),e((0,n._l)({address:t,chainId:a}))}catch(t){e((0,n.Nh)(t instanceof Error?t.message:"Failed to connect wallet"))}finally{e((0,n.r1)(!1))}};return{...t,connectWallet:a,disconnectWallet:()=>{e((0,n._r)())}}}},99199:(e,t,a)=>{"use strict";a.d(t,{Web3Provider:()=>x});var r=a(95155);a(85035);var n=a(83415),o=a(87017),s=a(26715),l=a(63439),i=a(56774),d=a(85658),c=a(36241),u=a(81100),g=a(74113),f=a(29385),m=a(34324),p=a(51424);let h=(0,l.Qq)([{groupName:"Recommended",wallets:[g.G,f.Z,m.d,p.O]}],{appName:"Dre Finance",projectId:"c385954abce0db2b929248968af25c16"}),b=(0,d.Z)({chains:[u.T],connectors:h,transports:{[u.T.id]:(0,c.L)("https://rpc.soniclabs.com")}}),y=new o.E;function x(e){let{children:t}=e;return(0,r.jsx)(n.x,{config:b,children:(0,r.jsx)(s.Ht,{client:y,children:(0,r.jsx)(l.qL,{theme:(0,i.a)({accentColor:"rgb(150, 90, 8)",accentColorForeground:"white"}),children:t})})})}},99304:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>o});var r=a(95155);a(12115);var n=a(51362);function o(e){let{children:t,...a}=e;return(0,r.jsx)(n.N,{...a,children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2533,3012,8451,9751,4692,6874,8542,3031,2001,813,8441,1684,7358],()=>t(27888)),_N_E=e.O()}]);