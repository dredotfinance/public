(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3775],{7603:(e,t,a)=>{Promise.resolve().then(a.bind(a,30222))},8345:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>m,Cj:()=>l,Iq:()=>i,Nh:()=>c,Ob:()=>r,r1:()=>p});let n=(0,a(51990).Z0)({name:"staking",initialState:{positions:[],buyableStakes:[],totalStaked:"0",totalRewards:"0",currentAPR:0,isLoading:!1,error:null},reducers:{setStakingPositions:(e,t)=>{e.positions=t.payload},setBuyableStakes:(e,t)=>{e.buyableStakes=t.payload},addStakingPosition:(e,t)=>{e.positions.push(t.payload)},updateStakingPosition:(e,t)=>{let a=e.positions.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.positions[a]={...e.positions[a],...t.payload.updates})},setTotalStaked:(e,t)=>{e.totalStaked=t.payload},setTotalRewards:(e,t)=>{e.totalRewards=t.payload},setCurrentAPR:(e,t)=>{e.currentAPR=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload}}}),{setStakingPositions:s,setBuyableStakes:r,addStakingPosition:i,updateStakingPosition:l,setTotalStaked:d,setTotalRewards:o,setCurrentAPR:u,setLoading:p,setError:c}=n.actions,m=n.reducer},30222:(e,t,a)=>{"use strict";a.d(t,{StakingCard:()=>U});var n=a(95155),s=a(12115),r=a(71539),i=a(88482),l=a(75525),d=a(1243),o=a(40646),u=a(51154),p=a(99840),c=a(97168),m=a(41397),y=a(49026),x=a(58281),f=a(40184),g=a(8542),h=a(87415),b=a(88579),v=a(94524),j=a(76736);let N=JSON.parse('[{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientAllowance","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientBalance","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC20InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC20InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC20InvalidSender","type":"error"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"name":"ERC20InvalidSpender","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]'),T=JSON.parse('[{"inputs":[{"internalType":"address","name":"target","type":"address"}],"name":"AddressEmptyCode","type":"error"},{"inputs":[],"name":"ERC721EnumerableForbiddenBatchMint","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"ERC721OutOfBoundsIndex","type":"error"},{"inputs":[],"name":"FailedCall","type":"error"},{"inputs":[],"name":"InvalidInitialization","type":"error"},{"inputs":[],"name":"NotInitializing","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"SafeERC20FailedOperation","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"contract IDreAuthority","name":"authority","type":"address"}],"name":"AuthorityUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"}],"name":"CooldownEnded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"}],"name":"CooldownStarted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint64","name":"version","type":"uint64"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"declaredValue","type":"uint256"}],"name":"PositionCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"seller","type":"address"},{"indexed":true,"internalType":"address","name":"buyer","type":"address"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"PositionSold","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"PositionUnstaked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"newAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newDeclaredValue","type":"uint256"}],"name":"PositionUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"RewardsClaimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"owner","type":"address"}],"name":"UnstakingCancelled","type":"event"},{"inputs":[],"name":"BASIS_POINTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"EPOCH_DURATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"HARBERGER_TAX_RATE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"REWARD_COOLDOWN_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TEAM_TREASURY_SHARE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TREASURY_SHARE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"WITHDRAW_COOLDOWN_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"authority","outputs":[{"internalType":"contract IDreAuthority","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"buyPosition","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"cancelUnstaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"claimRewards","outputs":[{"internalType":"uint256","name":"reward","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"completeUnstaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"declaredValue","type":"uint256"},{"internalType":"uint256","name":"minLockDuration","type":"uint256"}],"name":"createPosition","outputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"taxPaid","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"dreToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"earned","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"additionalAmount","type":"uint256"},{"internalType":"uint256","name":"addtionalDeclaredValue","type":"uint256"}],"name":"increaseAmount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_dreToken","type":"address"},{"internalType":"address","name":"_trackingToken","type":"address"},{"internalType":"address","name":"_authority","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastTimeRewardApplicable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastUpdateTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes[]","name":"data","type":"bytes[]"}],"name":"multicall","outputs":[{"internalType":"bytes[]","name":"results","type":"bytes[]"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"reward","type":"uint256"}],"name":"notifyRewardAmount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"periodFinish","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"positions","outputs":[{"components":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"declaredValue","type":"uint256"},{"internalType":"uint256","name":"rewardPerTokenPaid","type":"uint256"},{"internalType":"uint256","name":"rewards","type":"uint256"},{"internalType":"uint256","name":"cooldownEnd","type":"uint256"},{"internalType":"uint256","name":"rewardsUnlockAt","type":"uint256"}],"internalType":"struct IDreStaking.Position","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardPerToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardPerTokenStored","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IDreAuthority","name":"_newAuthority","type":"address"}],"name":"setAuthority","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"startUnstaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStaked","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"trackingToken","outputs":[{"internalType":"contract IPermissionedERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]');function w(e){let{isOpen:t,onClose:a,stakeData:i}=e,[w,k]=(0,s.useState)("confirm"),[R,A]=(0,s.useState)(!1),[C,S]=(0,s.useState)(""),[D,P]=(0,s.useState)(""),{stake:E,currentAPR:I}=(0,x.B)(),{metrics:F}=(0,f.m)(),M=(0,g.e)(),{data:B}=(0,h.G)();if(!i)return null;Number.parseFloat(i.amount||"0");let O=Number.parseFloat(i.predictedAPR||"0"),U=Number.parseFloat(i.predictedValue||"0"),L=(.05*U/365).toFixed(2),V=(.05*U).toFixed(2),$=I/100,_=O>=100?"Low":O>=50?"Medium":"High",z=async()=>{if(!B||!M){P("Wallet not connected"),k("error");return}A(!0),k("approve");try{let e=await M.readContract({address:j.A.tokens.DRE.address,abi:N,functionName:"allowance",args:[B.account.address,j.A.coreAddresses.stakingContract]}),t=await M.readContract({address:j.A.tokens.DRE.address,abi:N,functionName:"balanceOf",args:[B.account.address]});if(e>=t){k("submit"),A(!1);return}let{request:a}=await M.simulateContract({address:j.A.tokens.DRE.address,abi:N,functionName:"approve",args:[j.A.coreAddresses.stakingContract,b.Ao],account:B.account.address}),n=await B.writeContract(a);S(n),await M.waitForTransactionReceipt({hash:n}),k("submit")}catch(e){console.error("Approval failed:",e),P("Approval failed. Please try again."),k("error")}finally{A(!1)}},Y=async()=>{if(!B||!M){P("Wallet not connected"),k("error");return}A(!0),k("submit");try{let{request:e}=await M.simulateContract({address:j.A.coreAddresses.stakingContract,abi:T,functionName:"createPosition",args:[B.account.address,(0,v.g)(i.amount),(0,v.g)(i.predictedValue),0],account:B.account.address}),t=await B.writeContract(e);S(t),await M.waitForTransactionReceipt({hash:t}),k("success")}catch(e){console.error("Staking failed:",e),P("Staking failed. Please try again."),k("error")}finally{A(!1)}},H=()=>{switch(w){case"confirm":case"error":default:return 0;case"approve":return 33;case"submit":return 66;case"success":return 100}};return(0,n.jsx)(p.lG,{open:t,onOpenChange:()=>{k("confirm"),A(!1),S(""),P(""),a()},children:(0,n.jsxs)(p.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,n.jsxs)(p.c7,{children:[(0,n.jsxs)(p.L3,{className:"flex items-center gap-2 text-white",children:[(0,n.jsx)(r.A,{className:"h-5 w-5 text-gold-400"}),"Stake DRE"]}),(0,n.jsx)(p.rr,{className:"text-gray-400",children:"Stake DRE with APR prediction mechanism"})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Transaction Progress"}),(0,n.jsxs)("span",{className:"text-gold-400",children:[H(),"%"]})]}),(0,n.jsx)(m.k,{value:H(),className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"})]}),(0,n.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-4 space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Stake Amount"}),(0,n.jsxs)("span",{className:"text-sm font-mono text-white",children:[i.amount," DRE"]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Predicted APR"}),(0,n.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[O.toFixed(2),"%"]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Current APR"}),(0,n.jsxs)("span",{className:"text-sm font-mono text-white",children:[$.toFixed(2),"%"]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Predicted Value"}),(0,n.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:["$",U.toLocaleString()]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Daily Tax"}),(0,n.jsxs)("span",{className:"text-sm font-mono text-white",children:["$",L]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Annual Tax"}),(0,n.jsxs)("span",{className:"text-sm font-mono text-white",children:["$",V]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-400",children:"Snipe Risk"}),(0,n.jsxs)("span",{className:"text-sm font-medium flex items-center gap-1 ".concat("High"===_?"text-red-400":"Medium"===_?"text-yellow-400":"text-green-400"),children:[(0,n.jsx)(l.A,{className:"h-3 w-3"}),_]})]})]}),"confirm"===w&&(0,n.jsxs)(y.Fc,{className:"bg-gold-500/10 border-gold-500/30",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 text-gold-400"}),(0,n.jsxs)(y.TN,{className:"text-gray-300",children:[(0,n.jsx)("strong",{children:"APR Prediction:"})," You'll pay $",L," daily based on your ",O.toFixed(2),"% APR prediction.",O<$&&" Your prediction is below current APR - higher snipe risk!"]})]}),"success"===w&&(0,n.jsxs)(y.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,n.jsx)(o.A,{className:"h-4 w-4 text-green-400"}),(0,n.jsxs)(y.TN,{className:"text-gray-300",children:[(0,n.jsx)("strong",{children:"Success!"})," Your staking transaction has been completed with ",O.toFixed(2),"% APR prediction.",(0,n.jsx)("div",{className:"mt-2 text-xs font-mono text-green-400",children:(0,n.jsx)("a",{href:"https://sonicscan.org/tx/".concat(C),target:"_blank",rel:"noopener noreferrer",children:"View on Explorer"})})]})]}),"error"===w&&(0,n.jsxs)(y.Fc,{className:"bg-red-500/10 border-red-500/30",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 text-red-400"}),(0,n.jsxs)(y.TN,{className:"text-gray-300",children:[(0,n.jsx)("strong",{children:"Error:"})," ",D]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:["confirm"===w&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-400",children:["Ready to stake with ",O.toFixed(2),"% APR prediction?"]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"You'll need to approve the DRE token first."})]}),(0,n.jsx)(c.$,{className:"w-full bg-gold-400 hover:bg-gold-300 text-black font-semibold",onClick:z,disabled:R,children:R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Approving..."]}):"Begin Staking"})]}),"submit"===w&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"DRE approved! Ready to stake?"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"This will lock your DRE tokens with your APR prediction."})]}),(0,n.jsx)(c.$,{className:"w-full bg-gold-400 hover:bg-gold-300 text-black font-semibold",onClick:Y,disabled:R,children:R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Staking..."]}):"Stake DRE"})]})]})]})]})})}var k=a(13717),R=a(84616),A=a(87712),C=a(89852),S=a(37777),D=a(2145),P=a(63439),E=a(1405);function I(){let{isConnected:e}=(0,D.F)(),{positions:t,currentAPR:a,unstake:r,stake:l}=(0,x.B)(),{metrics:o}=(0,f.m)(),[u,g]=(0,s.useState)(!1),[h,b]=(0,s.useState)(0),[v,j]=(0,s.useState)("72:00:00"),[N,T]=(0,s.useState)(null),[w,I]=(0,s.useState)(!1),[F,M]=(0,s.useState)(null),[B,O]=(0,s.useState)(""),[U,L]=(0,s.useState)(!1),[V,$]=(0,s.useState)(null),[_,z]=(0,s.useState)(""),Y=async e=>{T(e),g(!0),b(0);try{let t=setInterval(()=>{b(e=>{let a=e+.5,n=Math.floor((100-a)*72/100),s=Math.floor(((100-a)*72/100-n)*60),r=Math.floor((((100-a)*72/100-n)*60-s)*60);return(j("".concat(n.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))),a>=100)?(clearInterval(t),100):a})},500);setTimeout(async()=>{try{await r(e.id),g(!1),T(null)}catch(e){console.error("Unstaking failed:",e)}},72e3)}catch(e){console.error("Error starting unstake:",e),g(!1),T(null)}},H=e=>{M(e),O(e.declaredValue.toString()),I(!0)},W=async()=>{if(F&&B)try{await l(F.amount),I(!1),M(null),O("")}catch(e){console.error("Failed to update APR:",e)}},J=e=>{$(e),z(""),L(!0)},Z=async()=>{if(V&&_)try{await l(_),L(!1),$(null),z("")}catch(e){console.error("Failed to add to position:",e)}};return e?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(i.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:[(0,n.jsxs)(i.aR,{children:[(0,n.jsx)(i.ZB,{className:"text-white text-xl font-semibold",children:"Your Stake Positions"}),(0,n.jsx)(i.BT,{className:"text-gray-400",children:"Manage your active stake positions, adjust APR predictions, or unstake"})]}),(0,n.jsx)(i.Wu,{children:0===t.length?(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("p",{className:"text-gray-400",children:"You don't have any active stake positions."}),(0,n.jsx)(c.$,{className:"mt-4 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",children:"Stake DRE"})]}):(0,n.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,n.jsxs)("div",{className:"rounded-lg bg-gray-800/50 border border-gray-700/50 p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("div",{className:"text-sm font-mono text-gray-400",children:["#",e.id]})}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)(c.$,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>H(e),children:[(0,n.jsx)(k.A,{className:"h-3.5 w-3.5 mr-1"}),"APR"]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"text-xs",children:"Modify your annual percentage rate prediction to optimize tax efficiency and risk exposure."})})]})}),(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)(c.$,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>J(e),children:[(0,n.jsx)(R.A,{className:"h-3.5 w-3.5 mr-1"}),"Add"]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"text-xs",children:"Increase position size by adding additional DRE tokens to existing stake allocation."})})]})}),(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)(c.$,{size:"sm",variant:"outline",className:"border-red-800/50 text-red-400 hover:bg-red-900/20",onClick:()=>Y(e),children:[(0,n.jsx)(A.A,{className:"h-3.5 w-3.5 mr-1"}),"Unstake"]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"text-xs",children:"Initiate withdrawal process with mandatory cooling period for security and stability."})})]})})]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:"Staked Amount"}),(0,n.jsxs)("div",{className:"text-lg font-mono font-bold text-white",children:[(0,E.J)(BigInt(e.amount),18)," DRE"]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number((0,E.J)(BigInt(e.amount),18))*((null==o?void 0:o.tokenPrice)||0)).toFixed(2)]})]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"text-xs",children:"Total amount of DRE tokens staked in this position."})})]})}),(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:"Rewards"}),(0,n.jsxs)("div",{className:"text-lg font-mono font-bold text-white",children:[e.rewards," DRE"]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number(e.rewards)*((null==o?void 0:o.tokenPrice)||0)).toFixed(2)]})]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"text-xs",children:"Accumulated rewards for this position."})})]})}),(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:" Buyout Value"}),(0,n.jsxs)("div",{className:"text-lg font-mono font-bold text-white",children:[(0,E.J)(BigInt(e.declaredValue),18)," DRE"]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number((0,E.J)(BigInt(e.declaredValue),18))*((null==o?void 0:o.tokenPrice)||0)).toFixed(2)]})]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"text-xs",children:"Accumulated rewards for this position."})})]})})]})]},e.id))})})]}),(0,n.jsx)(p.lG,{open:w,onOpenChange:I,children:(0,n.jsxs)(p.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,n.jsxs)(p.c7,{children:[(0,n.jsx)(p.L3,{className:"text-white",children:"Edit APR Prediction"}),(0,n.jsxs)(p.rr,{className:"text-gray-400",children:["Adjust your APR prediction for position ",null==F?void 0:F.id]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"new-apr",className:"text-sm font-medium text-gray-300",children:"New APR Prediction (%)"}),(0,n.jsx)(C.p,{id:"new-apr",placeholder:(Number(a)/100).toFixed(2),value:B,onChange:e=>O(e.target.value),className:"mt-2 bg-gray-800/50 border-gray-600 text-white font-mono"})]}),(0,n.jsxs)(p.Es,{children:[(0,n.jsx)(c.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>I(!1),children:"Cancel"}),(0,n.jsx)(c.$,{className:"bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:W,children:"Save Changes"})]})]})]})}),(0,n.jsx)(p.lG,{open:U,onOpenChange:L,children:(0,n.jsxs)(p.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,n.jsxs)(p.c7,{children:[(0,n.jsx)(p.L3,{className:"text-white",children:"Add to Position"}),(0,n.jsxs)(p.rr,{className:"text-gray-400",children:["Add more DRE tokens to position ",null==V?void 0:V.id]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"additional-amount",className:"text-sm font-medium text-gray-300",children:"Additional Amount"}),(0,n.jsx)(C.p,{id:"additional-amount",placeholder:"0.00",value:_,onChange:e=>z(e.target.value),className:"mt-2 bg-gray-800/50 border-gray-600 text-white font-mono"})]}),(0,n.jsxs)(p.Es,{children:[(0,n.jsx)(c.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>L(!1),children:"Cancel"}),(0,n.jsx)(c.$,{className:"bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:Z,children:"Add to Position"})]})]})]})}),(0,n.jsx)(p.lG,{open:u,onOpenChange:g,children:(0,n.jsxs)(p.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,n.jsxs)(p.c7,{children:[(0,n.jsx)(p.L3,{className:"text-white",children:"Unstaking Position"}),(0,n.jsxs)(p.rr,{className:"text-gray-400",children:["Position ",null==N?void 0:N.id," is being unstaked. This process requires a 72-hour cooldown period."]})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Cooldown Progress"}),(0,n.jsxs)("span",{className:"text-gold-400",children:[h.toFixed(1),"%"]})]}),(0,n.jsx)(m.k,{value:h,className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"}),(0,n.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Time remaining: ",v]})]}),(0,n.jsxs)(y.Fc,{className:"bg-gold-500/10 border-gold-500/30",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 text-gold-400"}),(0,n.jsxs)(y.TN,{className:"text-gray-300",children:[(0,n.jsx)("strong",{children:"Note:"})," You can cancel the unstaking process during the cooldown period. After the cooldown, the tokens will be automatically returned to your wallet."]})]}),(0,n.jsx)(p.Es,{children:(0,n.jsx)(c.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>{g(!1),b(0),j("72:00:00"),T(null)},children:"Cancel Unstaking"})})]})]})})]}):(0,n.jsx)(i.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,n.jsx)(i.Wu,{className:"p-6",children:(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("p",{className:"text-gray-400 mb-4",children:"Connect your wallet to view your positions"}),(0,n.jsx)(P.pK,{})]})})})}var F=a(92138),M=a(34540);function B(e){let{onStake:t,currentAPR:a,drePrice:r}=e,[i,d]=(0,s.useState)(""),[o,u]=(0,s.useState)(""),{tokenInfos:p}=(0,M.d4)(e=>e.balances),m=o?100*Number.parseFloat(o):0,y=(i?Number.parseFloat(i):0)*(1+parseFloat(o)/100),x=.05*y,f=()=>{let e=p.find(e=>"DRE"===e.symbol),t=(null==e?void 0:e.balance)||0n;return Number((0,E.J)(BigInt(t),j.A.tokens.DRE.decimals)).toFixed(2)};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:"Available Balance"}),(0,n.jsxs)("div",{className:"text-sm font-mono text-white",children:[f()," DRE"]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("label",{htmlFor:"stakeAmount",className:"text-sm text-gray-400",children:"Stake Amount"}),(0,n.jsx)(c.$,{variant:"ghost",size:"sm",className:"text-xs text-gold-400 hover:text-gold-300",onClick:()=>d(f()),children:"Max"})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(C.p,{id:"stakeAmount",type:"number",placeholder:"0.00",value:i,onChange:e=>d(e.target.value),className:"pr-24"}),(0,n.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-400",children:"DRE"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("label",{htmlFor:"predictedAPR",className:"text-sm text-gray-400",children:"Set Your Buyout Value"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.A,{className:"h-4 w-4 text-gray-400"}),(0,n.jsxs)("span",{className:"text-xs text-gray-400",children:["Risk Level: ",(()=>{if(!o)return"Unknown";let e=Number.parseFloat(o);return e>=100?"Low":e>=50?"Medium":"High"})()]})]})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(C.p,{id:"predictedAPR",type:"number",placeholder:"0.00",value:o,onChange:e=>u(e.target.value),className:"pr-24"}),(0,n.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-400",children:"%"})]})]}),(0,n.jsxs)("div",{className:"rounded-lg bg-gray-800/50 border border-gray-700/50 p-4 space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Current APR:"}),(0,n.jsxs)("span",{className:"font-mono text-white",children:[(a/100).toFixed(2),"%"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Your APR:"}),(0,n.jsxs)("span",{className:"font-mono text-white",children:[(m/100).toFixed(2),"%"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Your Buyout Value:"}),(0,n.jsxs)("span",{className:"font-mono text-white",children:["$",y.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Your upfront tax:"}),(0,n.jsxs)("span",{className:"font-mono text-white",children:["$",x.toFixed(2)]})]})]}),(0,n.jsxs)(c.$,{className:"w-full bg-gold-400 hover:bg-gold-300 text-black font-semibold",onClick:()=>{i&&o&&Number.parseFloat(i)>0&&Number.parseFloat(o)>0&&t({amount:i,predictedAPR:o,predictedValue:y.toFixed(2)})},disabled:!i||!o||0>=Number.parseFloat(i)||0>=Number.parseFloat(o),children:["Stake DRE",(0,n.jsx)(F.A,{className:"ml-2 h-4 w-4"})]})]})}function O(e){let{totalStaked:t,totalRewards:a,currentAPR:s,drePrice:r}=e;return(0,n.jsxs)("div",{className:"mb-6 grid grid-cols-3 gap-4 rounded-xl bg-gray-800/50 border border-gray-700/50 p-6 backdrop-blur-sm",children:[(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:"Your Staked DRE"}),(0,n.jsxs)("div",{className:"text-2xl font-mono font-bold text-white",children:[t," sDRE"]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",Number(t)*r]})]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore. Total amount of DRE tokens currently staked across all your positions."})})]})}),(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:"Buyout Value"}),(0,n.jsxs)("div",{className:"text-2xl font-mono font-bold text-gold-400",children:["$",(Number.parseFloat(t)*r).toFixed(2)]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",Number(t)*r]})]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore. Total amount of DRE tokens currently staked across all your positions."})})]})}),(0,n.jsx)(S.TooltipProvider,{delayDuration:0,children:(0,n.jsxs)(S.Tooltip,{children:[(0,n.jsx)(S.TooltipTrigger,{asChild:!0,children:(0,n.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400",children:"Claimable Rewards"}),(0,n.jsxs)("div",{className:"text-2xl font-mono font-bold text-emerald-400",children:[a," DRE"]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number.parseFloat(a)*r).toFixed(2)]})]})}),(0,n.jsx)(S.TooltipContent,{children:(0,n.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore. Total amount of DRE tokens currently staked across all your positions."})})]})})]})}function U(){let[e,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(null),{positions:d,currentAPR:o,fetchBuyableStakes:u,stake:p,unstake:c,claimRewards:m}=(0,x.B)(),{metrics:y}=(0,f.m)(),{isConnected:g}=(0,D.F)();if(!g)return(0,n.jsx)(i.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,n.jsx)(i.Wu,{className:"p-6",children:(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("p",{className:"text-gray-400 mb-4",children:"Connect your wallet to start staking"}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(P.pK,{})})]})})});let h=(null==y?void 0:y.tokenPrice)?Number(y.tokenPrice):0;return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(i.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:[(0,n.jsxs)(i.aR,{children:[(0,n.jsx)(i.ZB,{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(r.A,{className:"h-6 w-6 text-gold-400"}),(0,n.jsx)("span",{className:"text-white text-xl font-semibold",children:"Harberger Staking"})]})}),(0,n.jsx)(i.BT,{className:"text-gray-400",children:"Stake DRE with APR prediction. Pay 5% annual tax on predicted value, but risk being sniped if APR prediction is too low."})]}),(0,n.jsxs)(i.Wu,{children:[(0,n.jsx)(O,{totalStaked:d.reduce((e,t)=>e+Number((0,E.J)(BigInt(t.amount),18)),0).toString(),totalRewards:d.reduce((e,t)=>e+Number((0,E.J)(BigInt(t.declaredValue),18)),0).toString(),currentAPR:Number(o),drePrice:h}),(0,n.jsx)(B,{onStake:e=>{l(e),t(!0)},currentAPR:Number(o),drePrice:h})]})]}),(0,n.jsx)(I,{}),(0,n.jsx)(w,{isOpen:e,onClose:()=>t(!1),stakeData:a})]})}},37777:(e,t,a)=>{"use strict";a.d(t,{Tooltip:()=>d,TooltipContent:()=>u,TooltipProvider:()=>l,TooltipTrigger:()=>o});var n=a(95155),s=a(12115),r=a(89613),i=a(53999);let l=r.Kq,d=r.bL,o=r.l9,u=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,n.jsx)(r.UC,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","max-w-[250px]",a),...l})});u.displayName=r.UC.displayName},38326:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>l,GS:()=>s,Nh:()=>i,r1:()=>r});let n=(0,a(51990).Z0)({name:"protocol",initialState:{metrics:null,loading:!1,error:null},reducers:{setProtocolMetrics:(e,t)=>{e.metrics=t.payload,e.loading=!1,e.error=null},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload,e.loading=!1}}}),{setProtocolMetrics:s,setLoading:r,setError:i}=n.actions,l=n.reducer},40184:(e,t,a)=>{"use strict";a.d(t,{m:()=>i});var n=a(34540),s=a(38326),r=a(73349);let i=()=>{let e=(0,n.wA)(),t=(0,n.d4)(e=>e.protocol),a=async()=>{try{e((0,s.r1)(!0));let t=r.D.protocolMetrics();e((0,s.GS)(t))}catch(t){e((0,s.Nh)(t instanceof Error?t.message:"Failed to fetch protocol metrics"))}finally{e((0,s.r1)(!1))}};return{...t,fetchProtocolMetrics:a}}},41397:(e,t,a)=>{"use strict";a.d(t,{k:()=>l});var n=a(95155),s=a(12115),r=a(15312),i=a(53999);let l=s.forwardRef((e,t)=>{let{className:a,value:s,indicatorClassName:l,...d}=e;return(0,n.jsx)(r.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...d,children:(0,n.jsx)(r.C1,{className:(0,i.cn)("h-full w-full flex-1 bg-primary transition-all",l),style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});l.displayName=r.bL.displayName},49026:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>d,TN:()=>o});var n=a(95155),s=a(12115),r=a(74466),i=a(53999);let l=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,...r}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:s}),a),...r})});d.displayName="Alert",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...s})}).displayName="AlertTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...s})});o.displayName="AlertDescription"},53999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var n=a(52596),s=a(39688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,n.$)(t))}},58281:(e,t,a)=>{"use strict";a.d(t,{B:()=>i});var n=a(34540),s=a(8345),r=a(73349);let i=()=>{let e=(0,n.wA)(),t=(0,n.d4)(e=>e.balances),a=async()=>{try{e((0,s.r1)(!0));let t=r.D.buyableStakes();e((0,s.Ob)(t))}catch(t){e((0,s.Nh)(t instanceof Error?t.message:"Failed to fetch buyable stakes"))}finally{e((0,s.r1)(!1))}},i=async a=>{try{e((0,s.r1)(!0));let n={id:Date.now().toString(),amount:a,startTime:Date.now(),endTime:null,rewards:"0",apr:Number(t.currentAPR),isActive:!0};e((0,s.Iq)(n))}catch(t){e((0,s.Nh)(t instanceof Error?t.message:"Failed to stake"))}finally{e((0,s.r1)(!1))}},l=async t=>{try{e((0,s.r1)(!0)),e((0,s.Cj)({id:t,updates:{endTime:Date.now(),isActive:!1}}))}catch(t){e((0,s.Nh)(t instanceof Error?t.message:"Failed to unstake"))}finally{e((0,s.r1)(!1))}},d=async t=>{try{e((0,s.r1)(!0)),e((0,s.Cj)({id:t,updates:{rewards:"0"}}))}catch(t){e((0,s.Nh)(t instanceof Error?t.message:"Failed to claim rewards"))}finally{e((0,s.r1)(!1))}};return{positions:t.stakingPositions,currentAPR:t.currentAPR,fetchBuyableStakes:a,stake:i,unstake:l,claimRewards:d}}},73349:(e,t,a)=>{"use strict";a.d(t,{D:()=>n});let n={tokenBalances:()=>[{tokenAddress:"0xDRE...",symbol:"DRE",balance:"1000",decimals:18},{tokenAddress:"0xUSDC...",symbol:"USDC",balance:"5000",decimals:6}],tokenApprovals:()=>[{tokenAddress:"0xDRE...",spender:"0xStaking...",amount:"1000"}],protocolMetrics:()=>({totalValueLocked:"1000000",totalStaked:"500000",circulatingSupply:"1000000",marketCap:"12456789",fullyDilutedMarketCap:"24789012",currentAPY:7856,dailyROI:.52,treasuryValue:"8765432",riskFreeValue:"6543210",tokenPrice:42.56,backingPrice:"32.18",treasuryAssets:[{symbol:"USDC",amount:"500000",value:"500000",percentage:33.33},{symbol:"USDC/DRE v2 LP",amount:"100",value:"200000",percentage:13.33}],lastUpdate:Date.now(),marketCapChange:2.4,apyChange:-.8,priceChange:3.2,treasuryChange:1.7}),stakingPositions:()=>[{id:"1",amount:"100",startTime:Date.now()-6048e5,endTime:null,rewards:"50",apr:7856,isActive:!0}],buyableStakes:()=>[{id:"1",owner:"0x1234...5678",amount:"100",predictedAPR:7856,currentValue:4256,dailyTax:5.83,risk:"Low",trend:"up"},{id:"2",owner:"0x8765...4321",amount:"200",predictedAPR:7500,currentValue:8e3,dailyTax:10.96,risk:"Medium",trend:"down"},{id:"3",owner:"0x2468...1357",amount:"50",predictedAPR:8e3,currentValue:2e3,dailyTax:2.74,risk:"High",trend:"up"}],bondOfferings:()=>[{id:"1",tokenAddress:"0xUSDC...",tokenSymbol:"USDC",price:"1.0",discount:5,vestingTerm:604800,maxPayout:"100000",totalSold:"50000",isActive:!0},{id:"2",tokenAddress:"0xUSDC...",tokenSymbol:"USDC/DRE v2 LP",price:"1.0",discount:10,vestingTerm:604800,maxPayout:"100000",totalSold:"50000",isActive:!0}],bondPositions:()=>[{id:"1",offeringId:"1",amount:"1000",payout:"1050",startTime:Date.now()-2592e5,endTime:Date.now()+3456e5,claimed:"0",isVested:!1}]}},76736:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let n={USDC:{address:"0x29219dd400f2bf60e5a23d13be72b486d4038894",decimals:6,symbol:"USDC"},DRE:{address:"0xF8232259D4F92E44eF84F18A0B9877F4060B26F1",decimals:18,symbol:"DRE"},DRE_USDC_LP:{address:"0xB781C624397C423Cb62bAe9996cEbedC6734B76b",decimals:18}},s={treasury:"0xb692e2706b628998B4403979D9117Ed746bf8128",stakingContract:"0x30902d05C499911142FE62B447dDcf19649452A3",dreBondDepository:"0x2CE3618aa69ab891eeae4a18e64aaA55624a4481",dreOracle:"0xc3bAdcf754b0833c706Eb1b12A310B4EF5C20EB0",uiHelper:"0xA80Cb668EA11b675FC03d45F28326435885794eD"},r={tokens:n,coreAddresses:s,bonds:[{name:"USDC Bond",token:n.USDC,address:"0x0000000000000000000000000000000000000000",startPrice:1,endPrice:1.1,startDate:new Date("2025-01-01"),endDate:new Date("2025-01-02")},{name:"DRE/USDC LP",address:"0x0000000000000000000000000000000000000000",startPrice:1,endPrice:1.1,startDate:new Date("2025-01-01"),endDate:new Date("2025-01-02")}],approvalContracts:[s.treasury,s.stakingContract,s.dreBondDepository]}},88482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>u,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>p});var n=a(95155),s=a(12115),r=a(53999);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...s})});o.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...s})});u.displayName="CardContent";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...s})});p.displayName="CardFooter"},89852:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var n=a(95155),s=a(12115),r=a(53999);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,n.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},97168:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var n=a(95155),s=a(12115),r=a(99708),i=a(74466),l=a(53999);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:o=!1,...u}=e,p=o?r.DX:"button";return(0,n.jsx)(p,{className:(0,l.cn)(d({variant:s,size:i,className:a})),ref:t,...u})});o.displayName="Button"},99840:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>p,Es:()=>m,L3:()=>y,c7:()=>c,lG:()=>d,rr:()=>x});var n=a(95155),s=a(12115),r=a(15452),i=a(54416),l=a(53999);let d=r.bL;r.l9;let o=r.ZL;r.bm;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=r.hJ.displayName;let p=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,n.jsxs)(o,{children:[(0,n.jsx)(u,{}),(0,n.jsxs)(r.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[s,(0,n.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(i.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=r.UC.displayName;let c=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};c.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let y=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});y.displayName=r.hE.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=r.VY.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[8451,413,635,9613,4692,2368,1464,8441,1684,7358],()=>t(7603)),_N_E=e.O()}]);