(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3775],{1445:(e,s,t)=>{"use strict";t.d(s,{StakingCard:()=>R});var a=t(95155),r=t(12115),l=t(71539),i=t(81284),n=t(92138),o=t(75525),c=t(88482),d=t(97168),x=t(89852),m=t(37777),h=t(1243),g=t(40646),p=t(33109),j=t(51154),u=t(99840),N=t(41397),y=t(49026),b=t(58281),f=t(40184);function v(e){let{isOpen:s,onClose:t,stakeData:i}=e,[n,c]=(0,r.useState)("confirm"),[x,m]=(0,r.useState)(!1),[v,w]=(0,r.useState)(""),[k,T]=(0,r.useState)(""),{stake:C,currentAPR:A}=(0,b.B)(),{metrics:P}=(0,f.m)();if(!i)return null;Number.parseFloat(i.amount||"0");let S=Number.parseFloat(i.predictedAPR||"0"),R=Number.parseFloat(i.predictedValue||"0"),F=(.05*R/365).toFixed(2),D=(.05*R).toFixed(2),E=A/100,$=S>=100?"Low":S>=50?"Medium":"High",L=async()=>{m(!0),c("approve");try{await new Promise(e=>setTimeout(e,3e3)),c("submit")}catch(e){T("Approval failed. Please try again."),c("error")}finally{m(!1)}},B=async()=>{m(!0);try{await C(i.amount),w("0xabcdef1234567890abcdef1234567890abcdef12"),c("success")}catch(e){T("Transaction failed. Please try again."),c("error")}finally{m(!1)}},Z=()=>{c("confirm"),m(!1),w(""),T(""),t()},O=()=>{switch(n){case"confirm":case"error":default:return 0;case"approve":return 33;case"submit":return 66;case"success":return 100}};return(0,a.jsx)(u.lG,{open:s,onOpenChange:Z,children:(0,a.jsxs)(u.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsxs)(u.L3,{className:"flex items-center gap-2 text-white",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-gold-400"}),"Stake DRE"]}),(0,a.jsx)(u.rr,{className:"text-gray-400",children:"Stake DRE with APR prediction mechanism"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Transaction Progress"}),(0,a.jsxs)("span",{className:"text-gold-400",children:[O(),"%"]})]}),(0,a.jsx)(N.k,{value:O(),className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"})]}),(0,a.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Stake Amount"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:[i.amount," DRE"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Predicted APR"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[S.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Current APR"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:[E.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Predicted Value"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:["$",R.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Daily Tax"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:["$",F]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Annual Tax"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:["$",D]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Snipe Risk"}),(0,a.jsxs)("span",{className:"text-sm font-medium flex items-center gap-1 ".concat("High"===$?"text-red-400":"Medium"===$?"text-yellow-400":"text-green-400"),children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),$]})]})]}),"confirm"===n&&(0,a.jsxs)(y.Fc,{className:"bg-gold-500/10 border-gold-500/30",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-gold-400"}),(0,a.jsxs)(y.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"APR Prediction:"})," You'll pay $",F," daily based on your ",S.toFixed(2),"% APR prediction.",S<E&&" Your prediction is below current APR - higher snipe risk!"]})]}),"success"===n&&(0,a.jsxs)(y.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-green-400"}),(0,a.jsxs)(y.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Success!"})," Your staking transaction has been completed with ",S.toFixed(2),"% APR prediction.",(0,a.jsxs)("div",{className:"mt-2 text-xs font-mono text-green-400",children:["Tx: ",v]})]})]}),"error"===n&&(0,a.jsxs)(y.Fc,{className:"bg-red-500/10 border-red-500/30",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-red-400"}),(0,a.jsxs)(y.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Error:"})," ",k]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:["confirm"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(p.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Confirm APR Prediction"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Predicting ",S.toFixed(2),"% APR vs current ",E.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.$,{variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800",onClick:Z,children:"Cancel"}),(0,a.jsx)(d.$,{className:"flex-1 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:L,children:"Proceed"})]})]}),"approve"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(j.A,{className:"h-12 w-12 text-gold-400 mx-auto animate-spin"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Approve DRE Spending"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Confirm the approval transaction in your wallet"})]}),(0,a.jsxs)(d.$,{disabled:!0,className:"w-full bg-gray-600 text-gray-300",children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Waiting for Approval..."]})]}),"submit"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(l.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Submit Transaction"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Click to execute the staking transaction"})]}),(0,a.jsx)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:B,disabled:x,children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Execute Stake"})]}),"success"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 text-green-400 mx-auto"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Stake Created Successfully"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Your DRE is now staked with ",S.toFixed(2),"% APR prediction"]})]}),(0,a.jsx)(d.$,{className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",onClick:Z,children:"Close"})]}),"error"===n&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 text-red-400 mx-auto"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Transaction Failed"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:k})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.$,{variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800",onClick:Z,children:"Close"}),(0,a.jsx)(d.$,{className:"flex-1 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:()=>c("confirm"),children:"Try Again"})]})]})]})]})]})})}var w=t(13717),k=t(84616),T=t(87712),C=t(2145),A=t(63439);function P(){let{isConnected:e}=(0,C.F)(),{positions:s,currentAPR:t,unstake:l,stake:i,isLoading:n,error:o}=(0,b.B)(),{metrics:g}=(0,f.m)();(0,r.useEffect)(()=>{},[e]);let[p,j]=(0,r.useState)(!1),[v,P]=(0,r.useState)(""),[S,R]=(0,r.useState)(0),[F,D]=(0,r.useState)("72:00:00"),[E,$]=(0,r.useState)(null),[L,B]=(0,r.useState)(!1),[Z,O]=(0,r.useState)(null),[I,M]=(0,r.useState)(""),[W,Y]=(0,r.useState)(!1),[z,q]=(0,r.useState)(null),[U,_]=(0,r.useState)(""),H=async e=>{$(e),j(!0),R(0);try{let s=setInterval(()=>{R(e=>{let t=e+.5,a=Math.floor((100-t)*72/100),r=Math.floor(((100-t)*72/100-a)*60),l=Math.floor((((100-t)*72/100-a)*60-r)*60);return(D("".concat(a.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"),":").concat(l.toString().padStart(2,"0"))),t>=100)?(clearInterval(s),100):t})},500);setTimeout(async()=>{try{await l(e.id),j(!1),$(null)}catch(e){console.error("Unstaking failed:",e)}},72e3)}catch(e){console.error("Error starting unstake:",e),j(!1),$(null)}},G=e=>{O(e),M(e.apr.toString()),B(!0)},V=async()=>{if(Z&&I)try{await i(Z.amount),B(!1),O(null),M("")}catch(e){console.error("Failed to update APR:",e)}},K=e=>{q(e),_(""),Y(!0)},J=async()=>{if(z&&U)try{await i(U),Y(!1),q(null),_("")}catch(e){console.error("Failed to add to position:",e)}};return e?n?(0,a.jsx)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Loading positions..."})})})}):o?(0,a.jsx)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsxs)("p",{className:"text-red-400",children:["Error: ",o]})})})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-white text-xl font-semibold",children:"Your Stake Positions"}),(0,a.jsx)(c.BT,{className:"text-gray-400",children:"Manage your active stake positions, adjust APR predictions, or unstake"})]}),(0,a.jsx)(c.Wu,{children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-400",children:"You don't have any active stake positions."}),(0,a.jsx)(d.$,{className:"mt-4 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",children:"Stake DRE"})]}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"rounded-lg bg-gray-800/50 border border-gray-700/50 p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-sm font-mono text-gray-400",children:e.id}),(0,a.jsx)("div",{className:"text-xs bg-gray-700 rounded px-2 py-0.5 text-gray-300",children:new Date(e.startTime).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)(d.$,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>G(e),children:[(0,a.jsx)(w.A,{className:"h-3.5 w-3.5 mr-1"}),"APR"]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"text-xs",children:"Modify your annual percentage rate prediction to optimize tax efficiency and risk exposure."})})]})}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)(d.$,{size:"sm",variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>K(e),children:[(0,a.jsx)(k.A,{className:"h-3.5 w-3.5 mr-1"}),"Add"]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"text-xs",children:"Increase position size by adding additional DRE tokens to existing stake allocation."})})]})}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)(d.$,{size:"sm",variant:"outline",className:"border-red-800/50 text-red-400 hover:bg-red-900/20",onClick:()=>H(e),children:[(0,a.jsx)(T.A,{className:"h-3.5 w-3.5 mr-1"}),"Unstake"]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"text-xs",children:"Initiate withdrawal process with mandatory cooling period for security and stability."})})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Staked Amount"}),(0,a.jsxs)("div",{className:"text-lg font-mono font-bold text-white",children:[e.amount," DRE"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number(e.amount)*((null==g?void 0:g.tokenPrice)||0)).toFixed(2)]})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"text-xs",children:"Total amount of DRE tokens staked in this position."})})]})}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Current APR"}),(0,a.jsxs)("div",{className:"text-lg font-mono font-bold text-gold-400",children:[(e.apr/100).toFixed(2),"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Current: ",(t/100).toFixed(2),"%"]})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"text-xs",children:"Your current annual percentage rate for this position."})})]})}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Rewards"}),(0,a.jsxs)("div",{className:"text-lg font-mono font-bold text-white",children:[e.rewards," DRE"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number(e.rewards)*((null==g?void 0:g.tokenPrice)||0)).toFixed(2)]})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"text-xs",children:"Accumulated rewards for this position."})})]})}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Status"}),(0,a.jsx)("div",{className:"text-lg font-mono font-bold text-gold-400",children:e.isActive?"Active":"Inactive"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.endTime?"Ended: ".concat(new Date(e.endTime).toLocaleDateString()):"Ongoing"})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"text-xs",children:"Current status of your staking position."})})]})})]})]},e.id))})})]}),(0,a.jsx)(u.lG,{open:L,onOpenChange:B,children:(0,a.jsxs)(u.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{className:"text-white",children:"Edit APR Prediction"}),(0,a.jsxs)(u.rr,{className:"text-gray-400",children:["Adjust your APR prediction for position ",null==Z?void 0:Z.id]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"new-apr",className:"text-sm font-medium text-gray-300",children:"New APR Prediction (%)"}),(0,a.jsx)(x.p,{id:"new-apr",placeholder:(t/100).toFixed(2),value:I,onChange:e=>M(e.target.value),className:"mt-2 bg-gray-800/50 border-gray-600 text-white font-mono"})]}),(0,a.jsxs)(u.Es,{children:[(0,a.jsx)(d.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>B(!1),children:"Cancel"}),(0,a.jsx)(d.$,{className:"bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:V,children:"Save Changes"})]})]})]})}),(0,a.jsx)(u.lG,{open:W,onOpenChange:Y,children:(0,a.jsxs)(u.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{className:"text-white",children:"Add to Position"}),(0,a.jsxs)(u.rr,{className:"text-gray-400",children:["Add more DRE tokens to position ",null==z?void 0:z.id]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"additional-amount",className:"text-sm font-medium text-gray-300",children:"Additional Amount"}),(0,a.jsx)(x.p,{id:"additional-amount",placeholder:"0.00",value:U,onChange:e=>_(e.target.value),className:"mt-2 bg-gray-800/50 border-gray-600 text-white font-mono"})]}),(0,a.jsxs)(u.Es,{children:[(0,a.jsx)(d.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>Y(!1),children:"Cancel"}),(0,a.jsx)(d.$,{className:"bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:J,children:"Add to Position"})]})]})]})}),(0,a.jsx)(u.lG,{open:p,onOpenChange:j,children:(0,a.jsxs)(u.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{className:"text-white",children:"Unstaking Position"}),(0,a.jsxs)(u.rr,{className:"text-gray-400",children:["Position ",null==E?void 0:E.id," is being unstaked. This process requires a 72-hour cooldown period."]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Cooldown Progress"}),(0,a.jsxs)("span",{className:"text-gold-400",children:[S.toFixed(1),"%"]})]}),(0,a.jsx)(N.k,{value:S,className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Time remaining: ",F]})]}),(0,a.jsxs)(y.Fc,{className:"bg-gold-500/10 border-gold-500/30",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-gold-400"}),(0,a.jsxs)(y.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Note:"})," You can cancel the unstaking process during the cooldown period. After the cooldown, the tokens will be automatically returned to your wallet."]})]}),(0,a.jsx)(u.Es,{children:(0,a.jsx)(d.$,{variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>{j(!1),R(0),D("72:00:00"),$(null)},children:"Cancel Unstaking"})})]})]})})]}):(0,a.jsx)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Connect your wallet to view your positions"}),(0,a.jsx)(A.pK,{})]})})})}var S=t(85711);function R(){let[e,s]=(0,r.useState)(""),[t,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),[j,u]=(0,r.useState)(null),{isConnected:N}=(0,C.F)(),{positions:y,totalStaked:w,totalRewards:k,currentAPR:T,isLoading:R,error:F,fetchStakingPositions:D}=(0,b.B)(),{tokenBalances:E}=(0,S.J)(),{metrics:$}=(0,f.m)();(0,r.useEffect)(()=>{N&&D()},[N]);let L=t?100*Number.parseFloat(t):0,B=e?Number.parseFloat(e):0,Z=(null==$?void 0:$.tokenPrice)?Number($.tokenPrice):0,O=B*Z*L/(100*T),I=(.05*O/365).toFixed(2),M=(.05*O).toFixed(2),W=()=>{let e=E.find(e=>"DRE"===e.symbol);return e?e.balance:"0"};return N?R?(0,a.jsx)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Loading staking data..."})})})}):F?(0,a.jsx)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsxs)("p",{className:"text-red-400",children:["Error: ",F]})})})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"h-6 w-6 text-gold-400"}),(0,a.jsx)("span",{className:"text-white text-xl font-semibold",children:"Harberger Staking"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Current APR:"}),(0,a.jsxs)("span",{className:"font-mono font-bold text-gold-400 text-lg gold-glow",children:[(T/100).toFixed(2),"%"]}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"ghost",size:"icon",className:"h-5 w-5 rounded-full p-0",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"sr-only",children:"APR Info"})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Current APR fluctuates based on treasury performance and staking participation rates."})})]})})]})]}),(0,a.jsx)(c.BT,{className:"text-gray-400",children:"Stake DRE with APR prediction. Pay 5% annual tax on predicted value, but risk being sniped if APR prediction is too low."})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsxs)("div",{className:"mb-6 grid grid-cols-3 gap-4 rounded-xl bg-gray-800/50 border border-gray-700/50 p-6 backdrop-blur-sm",children:[(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Your Staked DRE"}),(0,a.jsxs)("div",{className:"text-2xl font-mono font-bold text-white",children:[w," sDRE"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Avg. Predicted APR: ",(T/100).toFixed(2),"%"]})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore. Total amount of DRE tokens currently staked across all your positions."})})]})}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Annual Tax Paid"}),(0,a.jsxs)("div",{className:"text-2xl font-mono font-bold text-gold-400",children:["$",(Number.parseFloat(w)*Z*.05).toFixed(2)]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Next reward: 6h 42m 15s"})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore. Total amount of DRE tokens currently staked across all your positions."})})]})}),(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Claimable Rewards"}),(0,a.jsxs)("div",{className:"text-2xl font-mono font-bold text-emerald-400",children:[k," DRE"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number.parseFloat(k)*Z).toFixed(2)]})]})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore. Total amount of DRE tokens currently staked across all your positions."})})]})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:N?(0,a.jsxs)(d.$,{className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-semibold",disabled:0===Number.parseFloat(k),children:["Claim All Rewards (",k," DRE)",(0,a.jsx)(n.A,{className:"ml-2 h-4 w-4"})]}):(0,a.jsx)(A.pK,{})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis aute irure dolor in reprehenderit in voluptate. Claim all accumulated staking rewards instantly to your wallet."})})]})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("label",{htmlFor:"stake-amount",className:"text-sm font-medium text-gray-300",children:"Stake Amount"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:["Balance: ",W()," DRE"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.p,{id:"stake-amount",placeholder:"0.00",value:e,onChange:e=>s(e.target.value),className:"bg-gray-800/50 border-gray-600 text-white font-mono"}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-400 hover:bg-gray-800",onClick:()=>s(W()),children:"Max"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsxs)("label",{htmlFor:"predicted-apr",className:"text-sm font-medium text-gray-300 flex items-center gap-1",children:["Predicted APR (%)",(0,a.jsx)(m.TooltipProvider,{delayDuration:0,children:(0,a.jsxs)(m.Tooltip,{children:[(0,a.jsx)(m.TooltipTrigger,{asChild:!0,children:(0,a.jsx)(d.$,{variant:"ghost",size:"icon",className:"h-4 w-4 rounded-full p-0",children:(0,a.jsx)(i.A,{className:"h-3 w-3 text-gray-400"})})}),(0,a.jsx)(m.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut enim ad minim veniam, quis nostrud exercitation. Higher predictions result in increased tax obligations but provide enhanced protection against stake acquisition attempts."})})]})})]}),(0,a.jsxs)("div",{className:"text-xs text-gold-400 font-mono",children:["Current: ",(T/100).toFixed(2),"%"]})]}),(0,a.jsx)(x.p,{id:"predicted-apr",placeholder:(T/100).toFixed(2),value:t,onChange:e=>h(e.target.value),className:"bg-gray-800/50 border-gray-600 text-white font-mono"})]}),t&&Number.parseFloat(t)>0&&e&&Number.parseFloat(e)>0&&(0,a.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Predicted Value"}),(0,a.jsxs)("span",{className:"text-sm font-mono font-medium text-gold-400",children:["$",O.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Daily Tax"}),(0,a.jsxs)("span",{className:"text-sm font-mono font-medium text-white",children:["$",I]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Annual Tax"}),(0,a.jsxs)("span",{className:"text-sm font-mono font-medium text-white",children:["$",M]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Snipe Risk"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-yellow-400 flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"h-3 w-3"}),(()=>{if(!t)return"Unknown";let e=Number.parseFloat(t);return e>=100?"Low":e>=50?"Medium":"High"})()]})]})]}),(0,a.jsxs)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black font-semibold",onClick:()=>{e&&t&&Number.parseFloat(e)>0&&Number.parseFloat(t)>0&&(u({amount:e,predictedAPR:t,predictedValue:O.toFixed(2)}),p(!0))},disabled:!N||!e||!t,children:["Stake DRE",(0,a.jsx)(n.A,{className:"ml-2 h-4 w-4"})]})]})]})]}),(0,a.jsx)(P,{}),(0,a.jsx)(v,{isOpen:g,onClose:()=>p(!1),stakeData:j})]}):(0,a.jsx)(c.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Connect your wallet to start staking"}),(0,a.jsx)(A.pK,{})]})})})}},7603:(e,s,t)=>{Promise.resolve().then(t.bind(t,1445))},8345:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>h,Cj:()=>n,Iq:()=>i,Nh:()=>m,Ob:()=>l,cB:()=>r,r1:()=>x});let a=(0,t(51990).Z0)({name:"staking",initialState:{positions:[],buyableStakes:[],totalStaked:"0",totalRewards:"0",currentAPR:0,isLoading:!1,error:null},reducers:{setStakingPositions:(e,s)=>{e.positions=s.payload},setBuyableStakes:(e,s)=>{e.buyableStakes=s.payload},addStakingPosition:(e,s)=>{e.positions.push(s.payload)},updateStakingPosition:(e,s)=>{let t=e.positions.findIndex(e=>e.id===s.payload.id);-1!==t&&(e.positions[t]={...e.positions[t],...s.payload.updates})},setTotalStaked:(e,s)=>{e.totalStaked=s.payload},setTotalRewards:(e,s)=>{e.totalRewards=s.payload},setCurrentAPR:(e,s)=>{e.currentAPR=s.payload},setLoading:(e,s)=>{e.isLoading=s.payload},setError:(e,s)=>{e.error=s.payload}}}),{setStakingPositions:r,setBuyableStakes:l,addStakingPosition:i,updateStakingPosition:n,setTotalStaked:o,setTotalRewards:c,setCurrentAPR:d,setLoading:x,setError:m}=a.actions,h=a.reducer},58281:(e,s,t)=>{"use strict";t.d(s,{B:()=>i});var a=t(34540),r=t(8345),l=t(73349);let i=()=>{let e=(0,a.wA)(),s=(0,a.d4)(e=>e.staking),t=async()=>{try{e((0,r.r1)(!0));let s=l.D.stakingPositions();e((0,r.cB)(s))}catch(s){e((0,r.Nh)(s instanceof Error?s.message:"Failed to fetch staking positions"))}finally{e((0,r.r1)(!1))}},i=async()=>{try{e((0,r.r1)(!0));let s=l.D.buyableStakes();e((0,r.Ob)(s))}catch(s){e((0,r.Nh)(s instanceof Error?s.message:"Failed to fetch buyable stakes"))}finally{e((0,r.r1)(!1))}},n=async t=>{try{e((0,r.r1)(!0));let a={id:Date.now().toString(),amount:t,startTime:Date.now(),endTime:null,rewards:"0",apr:s.currentAPR,isActive:!0};e((0,r.Iq)(a))}catch(s){e((0,r.Nh)(s instanceof Error?s.message:"Failed to stake"))}finally{e((0,r.r1)(!1))}},o=async s=>{try{e((0,r.r1)(!0)),e((0,r.Cj)({id:s,updates:{endTime:Date.now(),isActive:!1}}))}catch(s){e((0,r.Nh)(s instanceof Error?s.message:"Failed to unstake"))}finally{e((0,r.r1)(!1))}},c=async s=>{try{e((0,r.r1)(!0)),e((0,r.Cj)({id:s,updates:{rewards:"0"}}))}catch(s){e((0,r.Nh)(s instanceof Error?s.message:"Failed to claim rewards"))}finally{e((0,r.r1)(!1))}};return{...s,fetchStakingPositions:t,fetchBuyableStakes:i,stake:n,unstake:o,claimRewards:c}}}},e=>{var s=s=>e(e.s=s);e.O(0,[8451,413,635,9613,4692,4937,7208,5281,8441,1684,7358],()=>s(7603)),_N_E=e.O()}]);