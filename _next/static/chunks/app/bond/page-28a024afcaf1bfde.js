(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9218],{17803:(e,t,n)=>{"use strict";n.d(t,{BondPositions:()=>D});var a=n(95155),s=n(12115),i=n(74575),r=n(94870),l=n(88482),o=n(97168),d=n(88145),u=n(32267),c=n(89613);n(34289);var m=n(76736);n(30943);var p=n(67667),y=n(72258),x=n(1405),h=n(1243),f=n(40646),g=n(51154),b=n(99840),v=n(49026),j=n(89852),T=n(40968),N=n(74466),w=n(53999);let k=(0,N.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),C=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(T.b,{ref:t,className:(0,w.cn)(k(),n),...s})});C.displayName=T.b.displayName;var A=n(8542),I=n(87415),S=n(89090),R=n(39513);function E(e){let{isOpen:t,onClose:n,position:i,mode:l}=e,[d,u]=(0,s.useState)("confirm"),[c,p]=(0,s.useState)(!1),[T,N]=(0,s.useState)(""),[w,k]=(0,s.useState)(""),[E,D]=(0,s.useState)(""),{metrics:B}=(0,y.m)(),M=(0,A.e)(),{data:P}=(0,I.G)();if(!i)return null;let F=(null==B?void 0:B.tokenPrice)||0,_=Number(i.totalDreAmount)-Number(i.claimInfo.claimedAmount),O=Number("claim-stake"===l?_:i.claimInfo.claimableAmount),q=Number(i.claimInfo.claimedAmount);i.totalDreAmount,(0,x.J)(BigInt(i.originalAmount),i.tokenInfo.decimals);let $=async()=>{if(!P||!M){k("Wallet not connected"),u("error");return}p(!0),u("submit");try{if("claim-stake"===l){let e=await P.writeContract({address:m.A.coreAddresses.dreBondDepository,abi:R,functionName:"stake",args:[i.id,(0,S.X)(E,18)]});N(e)}else{let e=await P.writeContract({address:m.A.coreAddresses.dreBondDepository,abi:R,functionName:"claim",args:[i.id]});N(e)}u("success")}catch(e){console.error("Claim failed:",e),k("Failed to claim bond. Please try again."),u("error")}finally{p(!1)}},L=()=>{u("confirm"),p(!1),N(""),k(""),D(""),n()};return(0,a.jsx)(b.lG,{open:t,onOpenChange:L,children:(0,a.jsxs)(b.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,a.jsxs)(b.c7,{children:[(0,a.jsxs)(b.L3,{className:"flex items-center gap-2 text-white",children:[(0,a.jsx)(r.A,{className:"h-5 w-5 text-gold-400"}),"claim-stake"===l?"Claim All & Stake Bond":"Claim Bond"]}),(0,a.jsx)(b.rr,{className:"text-gray-400",children:"claim-stake"===l?"Claim all your DRE rewards and automatically stake them":"Claim your vested DRE rewards to your wallet"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:["confirm"===d&&(0,a.jsxs)(v.Fc,{className:"bg-yellow-500/10 border-yellow-500/30",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-yellow-400"}),(0,a.jsxs)(v.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"NOTE:"})," You are about to claim","claim-stake"===l?" all pending DRE rewards (including any unvested DRE) and automatically stake it":" ".concat(q," DRE to your wallet. This will not include any unvested tokens and these tokens won't earn any rewards."),"claim-stake"===l&&" This will lock your tokens in the staking contract for 30 days but they will continously earn rewards."]})]}),"claim-stake"===l&&"confirm"===d&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(C,{htmlFor:"selfReportedValue",className:"text-sm text-gray-400",children:"Set Buyout Value"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(j.p,{id:"selfReportedValue",type:"number",placeholder:"Enter value in DRE",value:E,onChange:e=>D(e.target.value),className:"bg-gray-800 border-gray-700 text-white placeholder:text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-400 self-center",children:"DRE"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"This value is used to determine the buyout value of the bond. When you set this value, a 5% tax will be charged upfront. If anyone buys your bond, they will pay this value."})]}),(0,a.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Bond ID"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:["#",i.id]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Claimable Amount"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:[O," DRE",(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["≈ $",(O*F).toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Already Claimed"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:[q," DRE",(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["≈ $",(q*F).toFixed(2)]})]})]}),"claim-stake"===l&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Upfront Tax"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[.05*Number(E)," DRE",(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["≈ $",(.05*Number(E)*F).toFixed(2)]})]})]})]}),"success"===d&&(0,a.jsxs)(v.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-green-400"}),(0,a.jsxs)(v.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Success!"})," You have successfully claimed your bond rewards","claim-stake"===l?" and staked them":"",".",(0,a.jsx)("div",{className:"mt-2 text-xs font-mono text-green-400",children:(0,a.jsx)("a",{href:"https://sonicscan.org/tx/".concat(T),target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"View Transaction On Explorer"})})]})]}),"error"===d&&(0,a.jsxs)(v.Fc,{className:"bg-red-500/10 border-red-500/30",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-red-400"}),(0,a.jsxs)(v.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Error:"})," ",w]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:["confirm"===d&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(o.$,{variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800",onClick:L,children:"Cancel"}),(0,a.jsx)(o.$,{className:"flex-1 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:$,disabled:"claim-stake"===l&&!E,children:"claim-stake"===l?"Claim & Stake":"Claim"})]})}),"submit"===d&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 text-gold-400 mx-auto animate-spin"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"claim-stake"===l?"Claiming and staking...":"Claiming..."})]}),(0,a.jsx)(o.$,{variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",onClick:L,disabled:c,children:"Cancel"})]}),"success"===d&&(0,a.jsx)(o.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:L,children:"Close"}),"error"===d&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(o.$,{variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",onClick:L,children:"Close"}),(0,a.jsx)(o.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:()=>u("confirm"),children:"Try Again"})]})]})]})]})})}function D(){let{bondPositions:e}=(0,p.t)(),{offerings:t}=(0,u.f)(),{tokenInfos:n}=(0,p.t)(),{metrics:m}=(0,y.m)(),[h,f]=(0,s.useState)(null),[g,b]=(0,s.useState)(!1),[v,j]=(0,s.useState)("claim-only"),T=e.map(e=>{var a;let s=t.find(t=>t.id===e.bondId.toString());if(!s)return null;let i=(a=(null==s?void 0:s.quoteToken)||"",(n||[]).find(e=>e.token.toLowerCase()===a.toLowerCase()));if(!i)return null;let r=Math.floor(Date.now()/1e3),l=Math.floor(Math.max(0,Number(e.startTime)+1036800-r)/86400);return{id:e.id,bondType:"".concat(s.id,"-").concat(i.symbol),tokenInfo:i,originalAmount:e.quoteAmount,totalDreAmount:Number((0,x.J)(BigInt(e.amount),18)).toFixed(2),daysRemaining:l,discount:"10.2%",createdAt:new Date(1e3*Number(e.startTime)),claimInfo:{percentage:33,claimableAmount:Number((0,x.J)(BigInt(e.claimableAmount),18)).toFixed(2),claimedAmount:Number((0,x.J)(BigInt(e.claimedAmount),18)).toFixed(2),claimableAt:new Date(1e3*Number(e.startTime)),claimed:!0,stakePositionId:"123",currentYield:"10.2%"}}}).filter(e=>null!==e),N=(e,t)=>{f(e),j(t),b(!0)};return(0,a.jsxs)(l.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2 text-white text-xl font-semibold",children:[(0,a.jsx)(i.A,{className:"h-6 w-6 text-gold-400"}),"Your Bond Positions"]}),(0,a.jsx)(l.BT,{className:"text-gray-400",children:"Track your bond positions and claim rewards using the (4,4,4) vesting model"})]}),(0,a.jsx)(l.Wu,{children:0===T.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-400",children:"You don't have any bond positions."})}):(0,a.jsx)("div",{className:"space-y-6",children:T.map(e=>{let t=e.claimInfo;return(0,a.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Bond #",e.id]}),(0,a.jsx)(d.E,{variant:"outline",className:"text-gold-400",children:e.bondType})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Created ",e.createdAt.toLocaleDateString()," •"," ",e.daysRemaining," days remaining"]})]}),(0,a.jsxs)("div",{className:"text-right space-y-1",children:[(0,a.jsxs)(o.$,{variant:"outline",size:"sm",className:"border-green-600 text-green-300 hover:bg-green-800",onClick:()=>N(e,"claim-stake"),children:["Claim & Stake",(0,a.jsx)(r.A,{className:"ml-1 h-4 w-4"})]}),"\xa0\xa0",(0,a.jsxs)(o.$,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-800",onClick:()=>N(e,"claim-only"),children:["Claim Only",(0,a.jsx)(r.A,{className:"ml-1 h-4 w-4"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(c.Bc,{delayDuration:0,children:(0,a.jsxs)(c.m_,{children:[(0,a.jsx)(c.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-white",children:"Claimable DRE"}),(0,a.jsxs)("div",{className:"text-lg font-mono font-bold text-green-400",children:[t.claimableAmount," DRE"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number(t.claimableAmount)*((null==m?void 0:m.tokenPrice)||0)).toFixed(2)]})]})}),(0,a.jsx)(c.ZI,{children:(0,a.jsx)("p",{className:"text-xs",children:"Total amount of DRE tokens staked in this position. This includes unclaimed rewards."})})]})}),(0,a.jsx)(c.Bc,{delayDuration:0,children:(0,a.jsxs)(c.m_,{children:[(0,a.jsx)(c.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-white",children:"Claimed DRE"}),(0,a.jsxs)("div",{className:"text-lg font-mono font-bold text-gray-400",children:[t.claimedAmount," DRE"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["≈ $",(Number(t.claimedAmount)*((null==m?void 0:m.tokenPrice)||0)).toFixed(2)]})]})}),(0,a.jsx)(c.ZI,{children:(0,a.jsx)("p",{className:"text-xs",children:"Estimated rewards for this position over the next year. This is based on the current APR and could change over time."})})]})}),(0,a.jsx)(c.Bc,{delayDuration:0,children:(0,a.jsxs)(c.m_,{children:[(0,a.jsx)(c.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-1 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-white",children:"Total DRE Bought"}),(0,a.jsxs)("div",{className:"text-lg font-mono font-bold text-gold-400",children:[e.totalDreAmount," DRE"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["from ",Number((0,x.J)(BigInt(e.originalAmount),e.tokenInfo.decimals)).toFixed(2)," ",e.tokenInfo.symbol]})]})}),(0,a.jsx)(c.ZI,{children:(0,a.jsx)("p",{className:"text-xs",children:"How much you would pay to buy this stake."})})]})})]})]},e.id)})})}),(0,a.jsx)(E,{isOpen:g,onClose:()=>{b(!1),f(null)},position:h,mode:v})]})}},30943:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var a=n(38227),s=n(36241),i=n(81100),r=n(34289),l=n(76736);async function o(e){let t=(0,a.l)({chain:i.T,transport:(0,s.L)()}),[n,o,d,u,c,m,p,y]=await t.readContract({address:l.A.coreAddresses.uiHelper,abi:r,functionName:"getProtocolInfo",args:[e,Object.values(l.A.tokens).map(e=>e.address)]});return{tvl:n,totalSupply:o,totalStaked:d,totalRewards:u,currentAPR:c,tokenInfos:m,stakingPositions:p,bondPositions:y}}},32267:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var a=n(34540),s=n(39919),i=n(52939),r=n(8542),l=n(76736),o=n(34289),d=n(39513),u=n(12115);let c=()=>{let e=(0,a.wA)(),t=(0,a.d4)(e=>e.bonding),n=(0,a.d4)(e=>e.balances.tokenInfos),c=(0,u.useMemo)(()=>t.offerings.map(e=>{let t=n.find(t=>t.token.toLowerCase()===e.quoteToken.toLowerCase());return{...e,quoteTokenSymbol:(null==t?void 0:t.symbol)||"Unknown"}}),[t.offerings,n]),m=(0,r.e)();return{offerings:c,fetchBondOfferings:async()=>{if(!m){e((0,i.Nh)("Public client not available"));return}try{e((0,i.r1)(!0));let t=await m.readContract({address:l.A.coreAddresses.dreBondDepository,abi:d,functionName:"bondLength"}),n=Number(t),a=[];for(let e=0;e<n;e+=100){let t=Math.min(e+100,n),s=Array.from({length:t-e},(t,n)=>e+n),[i,r]=await m.readContract({address:l.A.coreAddresses.uiHelper,abi:o,functionName:"getBondVariables",args:[s]}),d=i.filter(e=>e.enabled).map((e,t)=>({id:s[t].toString(),capacity:e.capacity.toString(),currentPrice:r[t],endTime:e.endTime.toString(),finalPrice:e.finalPrice.toString(),initialPrice:e.initialPrice.toString(),maxPayout:e.maxPayout.toString(),purchased:e.purchased.toString(),quoteToken:e.quoteToken.toString(),sold:e.sold.toString(),startTime:e.startTime.toString(),totalDebt:e.totalDebt.toString()}));a.push(...d)}let r=a.map(e=>({id:e.id.toString(),quoteToken:e.quoteToken,quoteTokenSymbol:"Unknown",enabled:!0,capacity:e.capacity.toString(),sold:e.sold.toString(),purchased:e.purchased.toString(),initialPrice:e.initialPrice.toString(),finalPrice:e.finalPrice.toString(),startTime:e.startTime.toString(),endTime:e.endTime.toString(),currentPrice:e.currentPrice.toString(),isActive:!0,discount:"10.2%",totalDebt:e.totalDebt.toString(),maxPayout:e.maxPayout.toString()})).filter(e=>null!==e);e((0,s.Q)(r))}catch(t){console.error("Failed to fetch bond offerings:",t),e((0,i.Nh)(t instanceof Error?t.message:"Failed to fetch bond offerings"))}finally{e((0,i.r1)(!1))}},purchaseBond:async(t,n)=>{try{e((0,i.r1)(!0))}catch(t){e((0,i.Nh)(t instanceof Error?t.message:"Failed to purchase bond"))}finally{e((0,i.r1)(!1))}},claimBond:async t=>{try{e((0,i.r1)(!0))}catch(t){e((0,i.Nh)(t instanceof Error?t.message:"Failed to claim bond"))}finally{e((0,i.r1)(!1))}}}}},39513:e=>{"use strict";e.exports=JSON.parse('[{"inputs":[],"name":"ERC721EnumerableForbiddenBatchMint","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"ERC721OutOfBoundsIndex","type":"error"},{"inputs":[],"name":"InvalidInitialization","type":"error"},{"inputs":[],"name":"NotInitializing","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"SafeERC20FailedOperation","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"contract IDreAuthority","name":"authority","type":"address"}],"name":"AuthorityUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"BondCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Claimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"CloseBond","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"quoteToken","type":"address"},{"indexed":false,"internalType":"uint256","name":"initialPrice","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"capacity","type":"uint256"}],"name":"CreateBond","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"DisableBond","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint64","name":"version","type":"uint64"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"BASIS_POINTS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"STAKING_LOCK_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TEAM_SHARE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"VESTING_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"authority","outputs":[{"internalType":"contract IDreAuthority","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bondLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"bonds","outputs":[{"components":[{"internalType":"bool","name":"enabled","type":"bool"},{"internalType":"uint256","name":"capacity","type":"uint256"},{"internalType":"contract IERC20","name":"quoteToken","type":"address"},{"internalType":"uint256","name":"totalDebt","type":"uint256"},{"internalType":"uint256","name":"maxPayout","type":"uint256"},{"internalType":"uint256","name":"sold","type":"uint256"},{"internalType":"uint256","name":"purchased","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"uint256","name":"initialPrice","type":"uint256"},{"internalType":"uint256","name":"finalPrice","type":"uint256"}],"internalType":"struct IDreBondDepository.Bond","name":"bond","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"claim","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"claimableAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"_quoteToken","type":"address"},{"internalType":"uint256","name":"_capacity","type":"uint256"},{"internalType":"uint256","name":"_initialPrice","type":"uint256"},{"internalType":"uint256","name":"_finalPrice","type":"uint256"},{"internalType":"uint256","name":"_duration","type":"uint256"}],"name":"create","outputs":[{"internalType":"uint256","name":"id_","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"currentPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_maxPrice","type":"uint256"},{"internalType":"uint256","name":"_minPayout","type":"uint256"},{"internalType":"address","name":"_user","type":"address"}],"name":"deposit","outputs":[{"internalType":"uint256","name":"payout_","type":"uint256"},{"internalType":"uint256","name":"tokenId_","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"disable","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"dre","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"getBond","outputs":[{"components":[{"internalType":"bool","name":"enabled","type":"bool"},{"internalType":"uint256","name":"capacity","type":"uint256"},{"internalType":"contract IERC20","name":"quoteToken","type":"address"},{"internalType":"uint256","name":"totalDebt","type":"uint256"},{"internalType":"uint256","name":"maxPayout","type":"uint256"},{"internalType":"uint256","name":"sold","type":"uint256"},{"internalType":"uint256","name":"purchased","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"uint256","name":"initialPrice","type":"uint256"},{"internalType":"uint256","name":"finalPrice","type":"uint256"}],"internalType":"struct IDreBondDepository.Bond","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_dre","type":"address"},{"internalType":"address","name":"_staking","type":"address"},{"internalType":"address","name":"_treasury","type":"address"},{"internalType":"address","name":"_authority","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"}],"name":"isLive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"positions","outputs":[{"components":[{"internalType":"uint256","name":"bondId","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"quoteAmount","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"lastClaimTime","type":"uint256"},{"internalType":"uint256","name":"claimedAmount","type":"uint256"},{"internalType":"bool","name":"isStaked","type":"bool"}],"internalType":"struct IDreBondDepository.BondPosition","name":"position","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IDreAuthority","name":"_newAuthority","type":"address"}],"name":"setAuthority","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_declaredValue","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"staking","outputs":[{"internalType":"contract IDreStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"treasury","outputs":[{"internalType":"contract ITreasury","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},39919:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,Q:()=>s});let a=(0,n(51990).Z0)({name:"bonding",initialState:{offerings:[]},reducers:{setOfferings:(e,t)=>{e.offerings=t.payload}}}),{setOfferings:s}=a.actions,i=a.reducer},67667:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});var a=n(34540),s=n(76736);function i(){let{tokenInfos:e,bondPositions:t,loading:n,error:i,lastUpdated:r}=(0,a.d4)(e=>e.balances),l=t=>{let n=e.find(e=>e.symbol===t);return(null==n?void 0:n.allowance)||0n};return{tokenInfos:e,bondPositions:t,loading:n,error:i,lastUpdated:r,getFormattedBalance:t=>{let n=s.A.tokens[t],a=e.find(e=>e.symbol===t);return(Number((null==a?void 0:a.balance)||0n)/Math.pow(10,n.decimals)).toFixed(n.decimals)},getContractBalance:t=>{let n=s.A.tokens[t],a=e.find(e=>e.symbol===t);return(Number((null==a?void 0:a.balance)||0n)/Math.pow(10,n.decimals)).toFixed(n.decimals)},getApproval:l,getFormattedApproval:e=>{let t=s.A.tokens[e];return(Number(l(e))/Math.pow(10,t.decimals)).toFixed(t.decimals)}}}},73001:(e,t,n)=>{"use strict";n.d(t,{BondingCard:()=>Y});var a=n(95155),s=n(12115),i=n(74575),r=n(81284),l=n(92138),o=n(88482),d=n(97168),u=n(89852),c=n(40330),m=n(66474),p=n(47863),y=n(5196),x=n(53999);let h=c.bL;c.YJ;let f=c.WT,g=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e;return(0,a.jsxs)(c.l9,{ref:t,className:(0,x.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...i,children:[s,(0,a.jsx)(c.In,{asChild:!0,children:(0,a.jsx)(m.A,{className:"h-4 w-4 opacity-50"})})]})});g.displayName=c.l9.displayName;let b=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(c.PP,{ref:t,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",n),...s,children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})});b.displayName=c.PP.displayName;let v=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(c.wn,{ref:t,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",n),...s,children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})});v.displayName=c.wn.displayName;let j=s.forwardRef((e,t)=>{let{className:n,children:s,position:i="popper",...r}=e;return(0,a.jsx)(c.ZL,{children:(0,a.jsxs)(c.UC,{ref:t,className:(0,x.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:i,...r,children:[(0,a.jsx)(b,{}),(0,a.jsx)(c.LM,{className:(0,x.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(v,{})]})})});j.displayName=c.UC.displayName,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(c.JU,{ref:t,className:(0,x.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...s})}).displayName=c.JU.displayName;let T=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e;return(0,a.jsxs)(c.q7,{ref:t,className:(0,x.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(c.VF,{children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})}),(0,a.jsx)(c.p4,{children:s})]})});T.displayName=c.q7.displayName,s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(c.wv,{ref:t,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",n),...s})}).displayName=c.wv.displayName;var N=n(37777),w=n(1243),k=n(40646),C=n(51154),A=n(99840),I=n(41397),S=n(49026),R=n(88579),E=n(1405),D=n(8542),B=n(87415),M=n(76736);let P=JSON.parse('[{"inputs":[{"internalType":"address","name":"_authority","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ECDSAInvalidSignature","type":"error"},{"inputs":[{"internalType":"uint256","name":"length","type":"uint256"}],"name":"ECDSAInvalidSignatureLength","type":"error"},{"inputs":[{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"ECDSAInvalidSignatureS","type":"error"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientAllowance","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"name":"ERC20InsufficientBalance","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC20InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC20InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC20InvalidSender","type":"error"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"name":"ERC20InvalidSpender","type":"error"},{"inputs":[{"internalType":"uint256","name":"deadline","type":"uint256"}],"name":"ERC2612ExpiredSignature","type":"error"},{"inputs":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC2612InvalidSigner","type":"error"},{"inputs":[],"name":"EnforcedPause","type":"error"},{"inputs":[],"name":"ExpectedPause","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"currentNonce","type":"uint256"}],"name":"InvalidAccountNonce","type":"error"},{"inputs":[],"name":"InvalidInitialization","type":"error"},{"inputs":[],"name":"InvalidShortString","type":"error"},{"inputs":[],"name":"NotInitializing","type":"error"},{"inputs":[{"internalType":"string","name":"str","type":"string"}],"name":"StringTooLong","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"contract IDreAuthority","name":"authority","type":"address"}],"name":"AuthorityUpdated","type":"event"},{"anonymous":false,"inputs":[],"name":"EIP712DomainChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint64","name":"version","type":"uint64"}],"name":"Initialized","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"authority","outputs":[{"internalType":"contract IDreAuthority","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"eip712Domain","outputs":[{"internalType":"bytes1","name":"fields","type":"bytes1"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"version","type":"string"},{"internalType":"uint256","name":"chainId","type":"uint256"},{"internalType":"address","name":"verifyingContract","type":"address"},{"internalType":"bytes32","name":"salt","type":"bytes32"},{"internalType":"uint256[]","name":"extensions","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account_","type":"address"},{"internalType":"uint256","name":"amount_","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pause","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IDreAuthority","name":"_newAuthority","type":"address"}],"name":"setAuthority","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unpause","outputs":[],"stateMutability":"nonpayable","type":"function"}]');var F=n(39513);let _=e=>{let{offering:t,isOpen:n,onClose:r,bondAmount:l,bondAmountRaw:o}=e,[u,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)("confirm"),[y,x]=(0,s.useState)(""),h=(0,D.e)(),{data:f}=(0,B.G)(),g=async()=>{if(!h||!f){x("Wallet client not available"),p("error");return}c(!0),p("approve");try{let e=t.quoteToken,n=M.A.coreAddresses.dreBondDepository;if(await h.readContract({address:e,abi:P,functionName:"allowance",args:[f.account.address,n]})>=o){p("submit");return}let{request:a}=await h.simulateContract({address:e,abi:P,functionName:"approve",args:[n,R.Ao],account:f.account.address}),s=await f.writeContract(a);await h.waitForTransactionReceipt({hash:s}),p("submit")}catch(e){console.error("Approval error:",e),x("Approval failed. Please try again."),p("error")}finally{c(!1)}},b=async()=>{if(!h||!f){x("Wallet client not available"),p("error");return}c(!0),p("submit");try{let e=M.A.coreAddresses.dreBondDepository,n=await h.readContract({address:e,abi:F,functionName:"currentPrice",args:[BigInt(t.id)]}),{request:a}=await h.simulateContract({address:e,abi:F,functionName:"deposit",args:[BigInt(t.id),o,n,0,f.account.address],account:f.account.address}),s=await f.writeContract(a);await h.waitForTransactionReceipt({hash:s}),p("success")}catch(e){console.error("Bond submission error:",e),x("Transaction failed. Please try again."),p("error")}finally{c(!1)}},v=()=>{p("confirm"),c(!1),x(""),r()},j=()=>{switch(m){case"confirm":case"error":default:return 0;case"approve":return 33;case"submit":return 66;case"success":return 100}},T=o*BigInt(1e18)/BigInt(t.currentPrice||1n);return(0,a.jsx)(A.lG,{open:n,onOpenChange:v,children:(0,a.jsxs)(A.Cf,{className:"sm:max-w-md bg-gray-900 border-gray-700",children:[(0,a.jsxs)(A.c7,{children:[(0,a.jsxs)(A.L3,{className:"flex items-center gap-2 text-white",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 text-gold-400"}),"Bond ",t.quoteTokenSymbol]}),(0,a.jsx)(A.rr,{className:"text-gray-400",children:"Purchase DRE at a discount with a 12 day vesting period"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Transaction Progress"}),(0,a.jsxs)("span",{className:"text-gold-400",children:[j(),"%"]})]}),(0,a.jsx)(I.k,{value:j(),className:"h-2 bg-gray-700",indicatorClassName:"bg-gradient-to-r from-gold-500 to-gold-600"})]}),(0,a.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Bond Asset"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-white",children:[Number(l).toFixed(2)," ",t.quoteTokenSymbol]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"You Will Receive"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-gold-400",children:[Number((0,E.J)(T,18)).toFixed(2)," DRE"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Bond Price"}),(0,a.jsxs)("span",{className:"text-sm font-mono text-emerald-400",children:[(Number(t.currentPrice)/1e7).toFixed(6)," ",t.quoteTokenSymbol,"/DRE"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Vesting Term"}),(0,a.jsx)("span",{className:"text-sm font-mono text-white",children:"12 days"})]})]}),"confirm"===m&&(0,a.jsxs)(S.Fc,{className:"bg-blue-500/10 border-blue-500/30",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 text-blue-400"}),(0,a.jsxs)(S.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Vesting Period:"})," Your DRE will vest linearly over 12 days. You can claim vested tokens at any time."]})]}),"success"===m&&(0,a.jsxs)(S.Fc,{className:"bg-green-500/10 border-green-500/30",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 text-green-400"}),(0,a.jsxs)(S.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Success!"})," Your bond has been created. DRE will vest over 12 days."]})]}),"error"===m&&(0,a.jsxs)(S.Fc,{className:"bg-red-500/10 border-red-500/30",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 text-red-400"}),(0,a.jsxs)(S.TN,{className:"text-gray-300",children:[(0,a.jsx)("strong",{children:"Error:"})," ",y]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:["confirm"===m&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.$,{variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800",onClick:v,children:"Cancel"}),(0,a.jsx)(d.$,{className:"flex-1 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:g,children:"Proceed"})]})}),"approve"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(C.A,{className:"h-12 w-12 text-gold-400 mx-auto animate-spin"}),(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Approve ",t.quoteTokenSymbol," Spending"]}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Confirm the approval transaction in your wallet"})]}),(0,a.jsxs)(d.$,{disabled:!0,className:"w-full bg-gray-600 text-gray-300",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Waiting for Approval..."]})]}),"submit"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(i.A,{className:"h-12 w-12 text-gold-400 mx-auto"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Submit Bond Transaction"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Click to execute the bond purchase"})]}),(0,a.jsx)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:b,disabled:u,children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Bond..."]}):"Execute Bond"})]}),"success"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(k.A,{className:"h-12 w-12 text-green-400 mx-auto"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Bond Created Successfully"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Your DRE will vest over 12 days"})]}),(0,a.jsx)(d.$,{className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",onClick:v,children:"Close"})]}),"error"===m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(w.A,{className:"h-12 w-12 text-red-400 mx-auto"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Transaction Failed"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:y})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.$,{variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-800",onClick:v,children:"Close"}),(0,a.jsx)(d.$,{className:"flex-1 bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black",onClick:()=>p("confirm"),children:"Try Again"})]})]})]})]})]})})};var O=n(32267),q=n(89090),$=n(44494),L=n(67667);function Y(){var e;let[t,n]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[p,y]=(0,s.useState)(!1),{offerings:x,fetchBondOfferings:b}=(0,O.f)(),v=x.find(e=>e.id===c),{tokenInfos:w}=(0,L.t)();(0,s.useEffect)(()=>{b()},[]);let k=e=>{let t=w.find(t=>t.symbol.toLowerCase()===e.toLowerCase());return t?(0,E.J)(BigInt(t.balance),t.decimals):"0"},C=(0,s.useMemo)(()=>{let e=w.find(e=>e.symbol.toLowerCase()===(null==v?void 0:v.quoteTokenSymbol.toLowerCase()));return(0,q.X)(t,(null==e?void 0:e.decimals)||18)},[t,v]);return(0,a.jsxs)(o.Zp,{className:"glow-card bg-gray-900/50 backdrop-blur-sm",children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsxs)(o.ZB,{className:"flex items-center gap-2 text-white text-xl font-semibold",children:[(0,a.jsx)(i.A,{className:"h-6 w-6 text-gold-400"}),"Bonding"]}),(0,a.jsx)(o.BT,{className:"text-gray-400",children:"Bond assets to purchase DRE at a discount"})]}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsxs)("div",{className:"mb-6 grid grid-cols-3 gap-4 rounded-xl bg-gray-800/50 border border-gray-700/50 p-6 backdrop-blur-sm",children:[(0,a.jsx)(N.TooltipProvider,{children:(0,a.jsxs)(N.Tooltip,{children:[(0,a.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Your Pending Rewards"}),(0,a.jsx)("div",{className:"text-2xl font-mono font-bold text-white",children:"245.67 DRE"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"≈ $10,456.32"})]})}),(0,a.jsx)(N.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt. Rewards currently vesting through the linear release schedule mechanism."})})]})}),(0,a.jsx)(N.TooltipProvider,{children:(0,a.jsxs)(N.Tooltip,{children:[(0,a.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Claimable Rewards"}),(0,a.jsx)("div",{className:"text-2xl font-mono font-bold text-emerald-400",children:"89.23 DRE"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"≈ $3,798.45"})]})}),(0,a.jsx)(N.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut enim ad minim veniam. Fully vested DRE tokens available for immediate withdrawal to your wallet."})})]})}),(0,a.jsx)(N.TooltipProvider,{children:(0,a.jsxs)(N.Tooltip,{children:[(0,a.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)("div",{className:"space-y-2 cursor-help",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Next Epoch"}),(0,a.jsx)("div",{className:"text-2xl font-mono font-bold text-gold-400",children:"12h 34m"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"+15.67 DRE"})]})}),(0,a.jsx)(N.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis aute irure dolor. Time remaining until next batch of tokens becomes available for claiming."})})]})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("label",{htmlFor:"bond-select",className:"text-sm font-medium text-gray-300",children:"Choose a Bond to Buy"}),(0,a.jsx)(N.TooltipProvider,{children:(0,a.jsxs)(N.Tooltip,{children:[(0,a.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"ghost",size:"icon",className:"h-5 w-5 rounded-full p-0",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"sr-only",children:"Bond Info"})]})}),(0,a.jsx)(N.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Bonding mechanisms allow strategic asset acquisition at preferential rates through time-locked commitments."})})]})})]}),(0,a.jsxs)(h,{value:c,onValueChange:m,children:[(0,a.jsx)(g,{className:"bg-gray-800/50 border-gray-600 text-white",children:(0,a.jsx)(f,{placeholder:"Select a bond"})}),(0,a.jsx)(j,{className:"bg-gray-800 border-gray-600",children:x.map(e=>(0,a.jsx)(T,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("span",{children:e.quoteTokenSymbol}),"\xa0-\xa0",(0,a.jsxs)("span",{className:"text-gold-400 text-sm font-mono",children:[e.discount,"% discount"]})]})},e.id))})]})]}),v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsx)("label",{htmlFor:"bond-amount",className:"text-sm font-medium text-gray-300",children:"Amount"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 font-mono",children:["Balance:"," ",k((null==v?void 0:v.quoteTokenSymbol)||""),(null==v?void 0:v.quoteTokenSymbol)||""]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.p,{id:"bond-amount",placeholder:"0.00",type:"number",value:t,onChange:e=>n(e.target.value),className:"bg-gray-800/50 border-gray-600 text-white font-mono"}),(0,a.jsx)(N.TooltipProvider,{children:(0,a.jsxs)(N.Tooltip,{children:[(0,a.jsx)(N.TooltipTrigger,{asChild:!0,children:(0,a.jsx)(d.$,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-400 hover:bg-gray-800",onClick:()=>n(k((null==v?void 0:v.quoteTokenSymbol)||"")),children:"Max"})}),(0,a.jsx)(N.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs text-xs",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut enim ad minim veniam. Set bond amount to your maximum available balance for optimal capital efficiency."})})]})})]})]}),(0,a.jsxs)("div",{className:"rounded-xl bg-gray-800/50 border border-gray-700/50 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"You Will Get"}),(0,a.jsx)("span",{className:"text-sm font-mono font-medium text-gold-400",children:"0.00 DRE"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Max You Can Buy"}),(0,a.jsxs)("span",{className:"text-sm font-mono font-medium text-white",children:[Number((0,$.c)(BigInt((null==v?void 0:v.maxPayout)||"0")))," ","DRE"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"ROI"}),(0,a.jsxs)("span",{className:"text-sm font-mono font-medium text-emerald-400",children:[(null===(e=x.find(e=>e.id===c))||void 0===e?void 0:e.discount)||"0","%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Vesting Term"}),(0,a.jsx)("span",{className:"text-sm font-mono font-medium text-white",children:"12 days"})]})]}),(0,a.jsxs)(d.$,{className:"w-full bg-gradient-to-r from-gold-500 to-gold-600 hover:from-gold-600 hover:to-gold-700 text-black font-semibold",onClick:()=>{c&&t&&Number.parseFloat(t)>0&&v&&y(!0)},children:["Bond ",(null==v?void 0:v.quoteTokenSymbol)||"",(0,a.jsx)(l.A,{className:"ml-2 h-4 w-4"})]})]})]})]}),(0,a.jsx)(o.wL,{className:"border-t border-gray-700/50 pt-4",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Note: Bonded DRE vests linearly over 12 days. You can claim your vested DRE at any time. You can also choose to stake your entire bond instantly to earn rewards."})}),v&&(0,a.jsx)(_,{isOpen:p,onClose:()=>y(!1),offering:v,bondAmount:t,bondAmountRaw:C})]})}},88145:(e,t,n)=>{"use strict";n.d(t,{E:()=>l});var a=n(95155),s=n(74466),i=n(53999);let r=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:n,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)(r({variant:n}),t),...s})}},89852:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});var a=n(95155),s=n(12115),i=n(53999);let r=s.forwardRef((e,t)=>{let{className:n,type:s,...r}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...r})});r.displayName="Input"},90327:(e,t,n)=>{"use strict";n.d(t,{BondingExplainer:()=>u});var a=n(95155),s=n(88482),i=n(16785),r=n(93550),l=n(33109),o=n(6874),d=n.n(o);function u(){return(0,a.jsxs)(s.Zp,{className:"glow-card bg-gradient-to-br from-gray-900/80 to-gray-800/50 backdrop-blur-sm border-gold-500/20",children:[(0,a.jsx)(s.aR,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.A,{className:"h-8 w-8 text-gold-400"}),(0,a.jsx)("div",{className:"absolute inset-0 h-8 w-8 text-gold-400/30 animate-ping rounded-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.ZB,{className:"text-2xl font-bold gradient-text",children:"Bonding System"}),(0,a.jsx)(s.BT,{className:"text-gray-400 mt-1",children:"Maximize your DRE acquisition with our innovative three-phase bonding mechanism"})]})]})}),(0,a.jsxs)(s.Wu,{className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 bg-gray-800/30 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"bg-gold-500/20 rounded-full p-1.5 mt-0.5",children:(0,a.jsx)(r.A,{className:"h-4 w-4 text-gold-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-white text-sm",children:"Discounted DRE"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Purchase DRE at 8-15% below market price"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 bg-gray-800/30 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"bg-emerald-500/20 rounded-full p-1.5 mt-0.5",children:(0,a.jsx)(l.A,{className:"h-4 w-4 text-emerald-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-white text-sm",children:"Auto-Compounding"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Claims automatically stake for immediate yield"})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-center pt-1 text-center text-sm text-gray-400",children:[(0,a.jsx)("span",{className:"",children:"To learn more, about the bonding system works,\xa0"}),(0,a.jsxs)("span",{className:"text-gold-400",children:[(0,a.jsx)(d(),{href:"https://drefinance.gitbook.io/protocol/mechanics-dre/4-4-4-bonding-model",target:"_blank",children:"read the docs"}),"."]})]})]})]})}},93151:(e,t,n)=>{Promise.resolve().then(n.bind(n,17803)),Promise.resolve().then(n.bind(n,73001)),Promise.resolve().then(n.bind(n,90327))}},e=>{var t=t=>e(e.s=t);e.O(0,[9751,6067,9613,6874,1823,1728,4047,8441,1684,7358],()=>t(93151)),_N_E=e.O()}]);